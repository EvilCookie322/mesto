(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){n(e,t),t.add(e)}function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var a=new WeakMap,u=new WeakSet,c=new WeakSet,l=function(){function l(e){var s,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t(this,c),t(this,u),r(this,"popup",void 0),r(this,"handleClosePopupPressEsc",void 0),p={writable:!0,value:void 0},n(this,s=a),s.set(this,p),this.popup=document.querySelector(e),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,i(e,t,"set"),n)}(this,a,this.popup.querySelector(".popup__close-button")),this.handleClosePopupPressEsc=o(this,c,f).bind(this)}var p,h;return p=l,(h=[{key:"addEventListeners",value:function(){var e,t=this;(this,e=a,function(e,t){return t.get?t.get.call(e):t.value}(this,i(this,e,"get"))).addEventListener("click",(function(){return t.closePopup()})),this.popup.addEventListener("click",(function(e){return o(t,u,s).call(t,e)}))}},{key:"openPopup",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",this.handleClosePopupPressEsc)}},{key:"closePopup",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleClosePopupPressEsc)}}])&&e(p.prototype,h),Object.defineProperty(p,"prototype",{writable:!1}),l}();function s(e){e.target.classList.contains("popup_opened")&&this.closePopup()}function f(e){"Escape"===e.key&&this.closePopup()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function k(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_(e,t,"get"))}function E(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_(e,t,"set"),n),n}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var S=new WeakMap,P=new WeakMap,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),g(w(e=i.call(this,".popup_type_preview-picture")),S,{writable:!0,value:void 0}),g(w(e),P,{writable:!0,value:void 0}),E(w(e),S,e.popup.querySelector(".popup__image")),E(w(e),P,e.popup.querySelector(".popup__name")),e.addEventListeners(),e}return t=a,(n=[{key:"openPopup",value:function(e,t){k(this,P).textContent=e,k(this,S).src=t,k(this,S).alt=e,d(m(a.prototype),"openPopup",this).call(this)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=W(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function W(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function M(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function A(e,t,n){x(e,t),t.set(e,n)}function x(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var B=new WeakMap,z=new WeakMap,F=new WeakMap,N=new WeakMap,V=new WeakMap,J=new WeakSet,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e,t){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),x(r=q(n=i.call(this,e)),o=J),o.add(r),A(q(n),B,{writable:!0,value:void 0}),A(q(n),z,{writable:!0,value:void 0}),A(q(n),F,{writable:!0,value:void 0}),A(q(n),N,{writable:!0,value:void 0}),A(q(n),V,{writable:!0,value:void 0}),U(q(n),B,t),U(q(n),z,n.popup.querySelector(".form")),U(q(n),F,Array.from(I(q(n),z).querySelectorAll(".form__input"))),U(q(n),N,I(q(n),z).querySelector(".form__submit-button")),U(q(n),V,I(q(n),N).textContent),n.addEventListeners(),n}return t=a,(n=[{key:"addEventListeners",value:function(){var e=this;T(R(a.prototype),"addEventListeners",this).call(this),I(this,z).addEventListener("submit",(function(t){t.preventDefault(),I(e,B).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,J,G).call(e)),e.closePopup()}))}},{key:"closePopup",value:function(){T(R(a.prototype),"closePopup",this).call(this),I(this,z).reset()}},{key:"loading",value:function(e){e?(I(this,N).textContent="Сохранение...",I(this,N).setAttribute("disabled",!0)):(I(this,N).removeAttribute("disabled"),I(this,N).textContent=I(this,V))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function G(){var e={};return I(this,F).forEach((function(t){return e[t.name]=t.value})),e}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){Y(e,t),t.add(e)}function X(e,t,n){Y(e,t),t.set(e,n)}function Y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function $(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,te(e,t,"get"))}function ee(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,te(e,t,"set"),n),n}function te(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakMap,ae=new WeakMap,ue=new WeakMap,ce=new WeakMap,le=new WeakMap,se=new WeakMap,fe=new WeakMap,pe=new WeakMap,he=new WeakMap,de=new WeakSet,ve=new WeakSet,ye=new WeakSet,be=function(){function e(t,n,r,o,i){var a=i.likes,u=i._id,c=i.name,l=i.link,s=i.owner,f=i.myID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q(this,ye),Q(this,ve),Q(this,de),X(this,ne,{writable:!0,value:void 0}),X(this,re,{writable:!0,value:void 0}),X(this,oe,{writable:!0,value:void 0}),X(this,ie,{writable:!0,value:void 0}),X(this,ae,{writable:!0,value:void 0}),X(this,ue,{writable:!0,value:void 0}),X(this,ce,{writable:!0,value:void 0}),X(this,le,{writable:!0,value:void 0}),X(this,se,{writable:!0,value:void 0}),X(this,fe,{writable:!0,value:void 0}),X(this,pe,{writable:!0,value:void 0}),X(this,he,{writable:!0,value:void 0}),ee(this,re,t),ee(this,oe,r),ee(this,ie,o),ee(this,ue,c),ee(this,ce,l),this.id=u,ee(this,ne,f),ee(this,le,s),ee(this,se,document.querySelector(n).content.querySelector(".element").cloneNode(!0)),ee(this,fe,$(this,se).querySelector(".element__image")),ee(this,ae,$(this,se).querySelector(".element__button-like")),ee(this,he,$(this,se).querySelector(".element__button-trash")),ee(this,pe,a),this.likeCount=$(this,se).querySelector(".element__like-count"),this.likeCount.textContent=a.length,this.isLiked=!1}var t,n;return t=e,(n=[{key:"removeCard",value:function(){$(this,se).remove(),ee(this,se,null)}},{key:"haveMyLike",value:function(){var e=this;$(this,pe).forEach((function(t){t._id==$(e,ne)&&Z(e,ye,ge).call(e)}))}},{key:"create",value:function(){return $(this,fe).src=$(this,ce),$(this,fe).alt=$(this,ue),$(this,se).querySelector(".element__name").textContent=$(this,ue),Z(this,de,we).call(this),this.haveMyLike(),$(this,se)}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function we(){var e=this;$(this,fe).addEventListener("click",(function(){return $(e,re).call(e,$(e,ue),$(e,ce))})),$(this,ae).addEventListener("click",(function(){$(e,ie).call(e,e.isLiked,e.id).then((function(t){e.likeCount.textContent=t.likes.length,Z(e,ye,ge).call(e)})).catch((function(e){return console.log("Error while toggling like",e)}))})),$(this,le)._id==$(this,ne)&&($(this,he).style.display="block",$(this,he).addEventListener("click",(function(){return Z(e,ve,me).call(e)})))}function me(){$(this,oe).call(this,this)}function ge(){this.isLiked=!this.isLiked,$(this,ae).classList.toggle("element__button-like_active")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){Se(e,t),t.add(e)}function _e(e,t,n){Se(e,t),t.set(e,n)}function Se(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Oe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ce(e,t,"get"))}function je(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ce(e,t,"set"),n),n}function Ce(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Te=new WeakMap,We=new WeakMap,Le=new WeakMap,Me=new WeakMap,qe=new WeakSet,Re=new WeakSet,Ae=new WeakSet,xe=new WeakSet,Ie=new WeakSet,Ue=new WeakSet,De=new WeakSet,Be=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ee(this,De),Ee(this,Ue),Ee(this,Ie),Ee(this,xe),Ee(this,Ae),Ee(this,Re),Ee(this,qe),_e(this,Te,{writable:!0,value:void 0}),_e(this,We,{writable:!0,value:void 0}),_e(this,Le,{writable:!0,value:void 0}),_e(this,Me,{writable:!0,value:void 0}),je(this,Te,t),je(this,We,n),je(this,Le,Array.from(Oe(this,We).querySelectorAll(Oe(this,Te).inputSelector))),je(this,Me,Oe(this,We).querySelector(Oe(this,Te).submitButtonSelector))}var t,n;return t=e,(n=[{key:"resetFormErrors",value:function(){var e=this;Oe(this,Le).forEach((function(t){Pe(e,Ae,Ne).call(e,t),Pe(e,Re,Fe).call(e,t)})),Pe(this,xe,Ve).call(this,Oe(this,Le))?Pe(this,Ie,Je).call(this,Oe(this,Me)):Pe(this,Ue,He).call(this,Oe(this,Me))}},{key:"enableValidation",value:function(){Pe(this,De,Ge).call(this)}}])&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ze(e,t){var n=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.add(Oe(this,Te).inputErrorClass),n.textContent=t,n.classList.add(Oe(this,Te).errorClass)}function Fe(e){var t=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.remove(Oe(this,Te).inputErrorClass),t.classList.remove(Oe(this,Te).errorClass),t.textContent=""}function Ne(e){e.validity.valid?Pe(this,Re,Fe).call(this,e):Pe(this,qe,ze).call(this,e,e.validationMessage)}function Ve(e){return e.some((function(e){return!e.validity.valid}))}function Je(e){e.classList.add(Oe(this,Te).inactiveButtonClass),e.setAttribute("disabled",!0)}function He(e){e.classList.remove(Oe(this,Te).inactiveButtonClass),e.removeAttribute("disabled")}function Ge(){var e=this;Oe(this,Le).forEach((function(t){return t.addEventListener("input",(function(){Pe(e,Ae,Ne).call(e,t),Pe(e,xe,Ve).call(e,Oe(e,Le))?Pe(e,Ie,Je).call(e,Oe(e,Me)):Pe(e,Ue,He).call(e,Oe(e,Me))}))}))}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Xe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Ye(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ze(e,t,"set"),n),n}function Ze(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var $e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=function(){function e(t){var n=t.nameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qe(this,$e,{writable:!0,value:void 0}),Qe(this,et,{writable:!0,value:void 0}),Qe(this,tt,{writable:!0,value:void 0}),Ye(this,$e,document.querySelector(n)),Ye(this,et,document.querySelector(r)),Ye(this,tt,document.querySelector(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Xe(this,$e).textContent,description:Xe(this,et).textContent}}},{key:"setUserInfo",value:function(e,t){Xe(this,$e).textContent=e,Xe(this,et).textContent=t}},{key:"setUserAvatar",value:function(e){Xe(this,tt).src=e}}])&&Ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function it(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ut(e,t,"get"))}function at(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ut(e,t,"set"),n),n}function ut(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ct=new WeakMap,lt=new WeakMap,st=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot(this,ct,{writable:!0,value:void 0}),ot(this,lt,{writable:!0,value:void 0}),at(this,ct,r),at(this,lt,n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return it(t,ct).call(t,e)}))}},{key:"addItem",value:function(e){it(this,lt).prepend(e)}}])&&rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(){return ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=dt(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ht.apply(this,arguments)}function dt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wt(e)););return e}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function yt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function mt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function gt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Et(e,t,"get"))}function kt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Et(e,t,"set"),n),n}function Et(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _t=new WeakMap,St=new WeakMap,Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(r);if(o){var n=wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),mt(bt(t=i.call(this,e)),_t,{writable:!0,value:void 0}),mt(bt(t),St,{writable:!0,value:void 0}),t.addEventListeners(),kt(bt(t),_t,t.popup.querySelector(".form")),kt(bt(t),St,gt(bt(t),_t).querySelector(".form__confirm-button")),t}return t=a,(n=[{key:"addEventListeners",value:function(){ht(wt(a.prototype),"addEventListeners",this).call(this)}},{key:"setSubmitAction",value:function(e){var t=this;this.submitAction=function(n){n.preventDefault(),gt(t,St).setAttribute("disabled",!0),e()}.bind(this),gt(this,_t).addEventListener("submit",this.submitAction)}},{key:"removeSubmitAction",value:function(){gt(this,_t).removeEventListener("submit",this.submitAction),gt(this,St).removeAttribute("disabled")}}])&&pt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l),Ot={inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},jt=document.querySelector(".profile__edit-button"),Ct=document.querySelector(".profile__add-button"),Tt=document.querySelector(".profile__edit-avatar-button"),Wt=document.forms["add-form"],Lt=document.forms["edit-form"],Mt=document.forms["edit-avatar-form"],qt=document.querySelector(".elements"),Rt=document.querySelector("#name-input"),At=document.querySelector("#description-input");function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ut(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Bt(e,t,"get"))}function Dt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Bt(e,t,"set"),n),n}function Bt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var zt,Ft=new WeakMap,Nt=new WeakMap,Vt=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),It(this,Ft,{writable:!0,value:void 0}),It(this,Nt,{writable:!0,value:void 0}),Dt(this,Ft,t.url),Dt(this,Nt,t.headers)}var t,n;return t=e,(n=[{key:"response",value:function(e){return e().then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))}))}},{key:"getInitialCards",value:function(){var e=this;return this.response((function(){return fetch("".concat(Ut(e,Ft),"/cards"),{headers:Ut(e,Nt)})}))}},{key:"getUserInformation",value:function(){var e=this;return this.response((function(){return fetch("".concat(Ut(e,Ft),"/users/me"),{headers:Ut(e,Nt)})}))}},{key:"updateUserInformation",value:function(e,t){var n=this;return this.response((function(){return fetch("".concat(Ut(n,Ft),"/users/me"),{method:"PATCH",headers:Ut(n,Nt),body:JSON.stringify({name:e,about:t})})}))}},{key:"createCard",value:function(e){var t=this,n=e.name,r=e.link;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards"),{method:"POST",headers:Ut(t,Nt),body:JSON.stringify({name:n,link:r})})}))}},{key:"deleteCard",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e),{method:"DELETE",headers:Ut(t,Nt)})}))}},{key:"setLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e,"/likes"),{method:"PUT",headers:Ut(t,Nt)})}))}},{key:"removeLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Ut(t,Nt)})}))}},{key:"updateAvatar",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/users/me/avatar"),{method:"PATCH",headers:Ut(t,Nt),body:JSON.stringify({avatar:e})})}))}}])&&xt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"ed068a2f-c117-42a5-a232-1e0db66110be","Content-Type":"application/json"}}),Jt=new nt({nameSelector:".profile__name",descriptionSelector:".profile__description",avatarSelector:".profile__photo"}),Ht=new st({renderer:function(e){Ht.addItem(en(e))}},qt),Gt=Vt.getUserInformation().then((function(e){Jt.setUserInfo(e.name,e.about),Jt.setUserAvatar(e.avatar),zt=e._id})).catch((function(e){return console.log("Error while getting user information",e)})),Kt=Vt.getInitialCards().then((function(e){Ht.renderItems(e)})).catch((function(e){return console.log("Error while getting initial cards",e)}));Promise.all([Gt,Kt]).catch((function(e){return console.error(e)}));var Qt=new Pt(".popup_type_confirm-delete"),Xt=function(e){Qt.openPopup(),Qt.setSubmitAction((function(){Vt.deleteCard(e.id).then((function(){return e.removeCard()})).then((function(){return Qt.closePopup()})).catch((function(e){return console.log("Error while deleting card",e)})).finally((function(){setTimeout((function(){Qt.removeSubmitAction()}),1e3)}))}))},Yt=function(e,t){return e?Vt.removeLike(t):Vt.setLike(t)},Zt=new O,$t=function(e,t){return Zt.openPopup(e,t)},en=function(e){return e.myID=zt,new be($t,"#element",Xt,Yt,e).create()},tn=new H(".popup_type_add-card",(function(e){tn.loading(!0),Vt.createCard(e).then((function(e){Ht.addItem(en(e))})).catch((function(e){return console.log("Error while creating card",e)})).finally((function(){return tn.loading(!1)}))}));Ct.addEventListener("click",(function(){on.resetFormErrors(),tn.openPopup()}));var nn=new H(".popup_type_edit-profile",(function(e){var t=e.name,n=e.description;nn.loading(!0),Vt.updateUserInformation(t,n).then((function(){return Jt.setUserInfo(t,n)})).catch((function(e){return console.log("Error while updating user information",e)})).finally((function(){return nn.loading(!1)}))})),rn=new H(".popup_type_edit-avatar",(function(e){var t=e.link;tn.loading(!0),Vt.updateAvatar(t).then((function(){return Jt.setUserAvatar(t)})).catch((function(e){return console.log("Error while updating avatar",e)})).finally((function(){return tn.loading(!1)}))}));Tt.addEventListener("click",(function(){rn.openPopup(),un.resetFormErrors()})),jt.addEventListener("click",(function(){var e=Jt.getUserInfo();Rt.value=e.name,At.value=e.description,nn.openPopup(),an.resetFormErrors()}));var on=new Be(Ot,Wt),an=new Be(Ot,Lt),un=new Be(Ot,Mt);on.enableValidation(),an.enableValidation(),un.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBSyxJQUN2Q3FDLE9BQU0sU0FBQUMsR0FBSyxPQUFJQyxRQUFRQyxJQUFJLDhCQUErQkYsRUFBTSxJQUNoRXFGLFNBQVEsa0JBQU1TLEdBQWlCQyxTQUFRLEVBQU0sR0FDaEQsSUFFQXhELEdBQWlCM0YsaUJBQWlCLFNBQVMsV0FDMUN5SixHQUFvQnBCLFlBQ3BCc0IsR0FBNEJMLGlCQUM3QixJQUVBN0QsR0FBa0J6RixpQkFBaUIsU0FBUyxXQUFNLE1BQytCc0gsR0FBU3NDLGNBQWhGM0QsR0FBaUJsRSxNQUFLLEVBQTVCbEIsS0FBMkNxRixHQUF3Qm5FLE1BQUssRUFBMUMrQyxZQUNqQ3lFLEdBQXFCbEIsWUFDckJ3QixHQUFzQlAsaUJBQ3ZCLElBRUEsSUFBTUQsR0FBdUIsSUFBSTNGLEdBQWM4QixHQUFlSSxJQUN4RGlFLEdBQXdCLElBQUluRyxHQUFjOEIsR0FBZU0sSUFDekQ2RCxHQUE4QixJQUFJakcsR0FBYzhCLEdBQWVPLElBQ3JFc0QsR0FBcUJTLG1CQUNyQkQsR0FBc0JDLG1CQUN0QkgsR0FBNEJHLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2RhdGEuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUG9wdXAge1xyXG5cclxuXHRwb3B1cDtcclxuXHRoYW5kbGVDbG9zZVBvcHVwUHJlc3NFc2M7XHJcblx0I2J1dHRvbkNsb3NlO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG5cdFx0dGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG5cdFx0dGhpcy4jYnV0dG9uQ2xvc2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcblx0XHR0aGlzLmhhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYyA9IHRoaXMuI2hhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYy5iaW5kKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0YWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLiNidXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2VQb3B1cCgpKTtcclxuXHRcdHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy4jaGFuZGxlQ2xvc2VQb3B1cENsaWNrT3ZlcmxheShlKSk7XHJcblx0fVxyXG5cclxuXHQjaGFuZGxlQ2xvc2VQb3B1cENsaWNrT3ZlcmxheShldmVudCkge1xyXG5cdFx0aWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcblx0XHRcdHRoaXMuY2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0I2hhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYyhldmVudCkge1xyXG5cdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvcGVuUG9wdXAoKSB7XHJcblx0XHR0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjKTtcclxuXHR9XHJcblxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblx0XHR0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG5cclxuXHQjaW1hZ2U7XHJcblx0I25hbWU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0c3VwZXIoJy5wb3B1cF90eXBlX3ByZXZpZXctcGljdHVyZScpO1xyXG5cdFx0dGhpcy4jaW1hZ2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuXHRcdHRoaXMuI25hbWUgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbmFtZScpO1xyXG5cdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0b3BlblBvcHVwKG5hbWUsIGxpbmspIHtcclxuXHRcdHRoaXMuI25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cdFx0dGhpcy4jaW1hZ2Uuc3JjID0gbGluaztcclxuXHRcdHRoaXMuI2ltYWdlLmFsdCA9IG5hbWU7XHJcblx0XHRzdXBlci5vcGVuUG9wdXAoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuXHJcblx0I2hhbmRsZVN1Ym1pdDtcclxuXHQjZm9ybTtcclxuXHQjZm9ybUlucHV0cztcclxuXHQjc3VibWl0YnV0dG9uO1xyXG5cdCNzdWJtaXRCdXR0b25UZXh0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcblx0XHRzdXBlcihzZWxlY3Rvcik7XHJcblx0XHR0aGlzLiNoYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcblx0XHR0aGlzLiNmb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5cdFx0dGhpcy4jZm9ybUlucHV0cyA9IEFycmF5LmZyb20odGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSk7XHJcblx0XHR0aGlzLiNzdWJtaXRidXR0b24gPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQtYnV0dG9uJyk7XHJcblx0XHR0aGlzLiNzdWJtaXRCdXR0b25UZXh0ID0gdGhpcy4jc3VibWl0YnV0dG9uLnRleHRDb250ZW50O1xyXG5cdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0I2dldElucHV0VmFsdWVzKCkge1xyXG5cdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHRcdHRoaXMuI2Zvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuXHRcdHJldHVybiBpbnB1dFZhbHVlcztcclxuXHR9XHJcblxyXG5cdGFkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0c3VwZXIuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLiNoYW5kbGVTdWJtaXQodGhpcy4jZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblx0XHRcdHRoaXMuY2xvc2VQb3B1cCgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRjbG9zZVBvcHVwKCkge1xyXG5cdFx0c3VwZXIuY2xvc2VQb3B1cCgpO1xyXG5cdFx0dGhpcy4jZm9ybS5yZXNldCgpO1xyXG5cdH1cclxuXHJcblx0bG9hZGluZyhpc0xvYWRpbmcpIHtcclxuXHRcdGlmIChpc0xvYWRpbmcpIHtcclxuXHRcdFx0dGhpcy4jc3VibWl0YnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuXHRcdFx0dGhpcy4jc3VibWl0YnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuI3N1Ym1pdEJ1dHRvblRleHQ7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQb3B1cFdpdGhGb3JtIH07IiwiY2xhc3MgQ2FyZCB7XHJcblxyXG5cdCNteUlEO1xyXG5cclxuXHQjb3BlbkNhcmRQcmV2aWV3O1xyXG5cdCNoYW5kbGVEZWxldGU7XHJcblx0I2hhbmRsZUxpa2U7XHJcblx0I2J1dHRvbkxpa2U7XHJcblx0I25hbWU7XHJcblx0I2xpbms7XHJcblx0I293bmVyO1xyXG5cdCNlbGVtZW50O1xyXG5cdCNlbGVtZW50SW1hZ2U7XHJcblx0I2xpa2VzO1xyXG5cdCNidXR0b25EZWxldGU7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihvcGVuQ2FyZFByZXZpZXcsIHRlbXBsYXRlLCBoYW5kbGVEZWxldGUsIGhhbmRsZUxpa2UsIHsgbGlrZXMsIF9pZCwgbmFtZSwgbGluaywgb3duZXIsIG15SUQgfSkge1xyXG5cdFx0dGhpcy4jb3BlbkNhcmRQcmV2aWV3ID0gb3BlbkNhcmRQcmV2aWV3O1xyXG5cdFx0dGhpcy4jaGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xyXG5cdFx0dGhpcy4jaGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcblx0XHR0aGlzLiNuYW1lID0gbmFtZTtcclxuXHRcdHRoaXMuI2xpbmsgPSBsaW5rO1xyXG5cdFx0dGhpcy5pZCA9IF9pZDtcclxuXHRcdHRoaXMuI215SUQgPSBteUlEO1xyXG5cdFx0dGhpcy4jb3duZXIgPSBvd25lcjtcclxuXHRcdHRoaXMuI2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5jb250ZW50XHJcblx0XHRcdC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdHRoaXMuI2VsZW1lbnRJbWFnZSA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XHJcblx0XHR0aGlzLiNidXR0b25MaWtlID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uLWxpa2UnKTtcclxuXHRcdHRoaXMuI2J1dHRvbkRlbGV0ZSA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbi10cmFzaCcpO1xyXG5cdFx0dGhpcy4jbGlrZXMgPSBsaWtlcztcclxuXHRcdHRoaXMubGlrZUNvdW50ID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudCcpO1xyXG5cdFx0dGhpcy5saWtlQ291bnQudGV4dENvbnRlbnQgPSBsaWtlcy5sZW5ndGg7XHJcblx0XHR0aGlzLmlzTGlrZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdCNhZGRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuI2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuI29wZW5DYXJkUHJldmlldyh0aGlzLiNuYW1lLCB0aGlzLiNsaW5rKSk7XHJcblx0XHR0aGlzLiNidXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLiNoYW5kbGVMaWtlKHRoaXMuaXNMaWtlZCwgdGhpcy5pZClcclxuXHRcdFx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5saWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuXHRcdFx0XHRcdHRoaXMuI3RvZ2dsZUxpa2UoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgdG9nZ2xpbmcgbGlrZScsIGVycm9yKSk7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLiNvd25lci5faWQgPT0gdGhpcy4jbXlJRCkge1xyXG5cdFx0XHR0aGlzLiNidXR0b25EZWxldGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0XHRcdHRoaXMuI2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuI2hhbmRsZURlbGV0ZUNhcmQoKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQjaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuXHRcdHRoaXMuI2hhbmRsZURlbGV0ZSh0aGlzKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUNhcmQoKSB7XHJcblx0XHR0aGlzLiNlbGVtZW50LnJlbW92ZSgpO1xyXG5cdFx0dGhpcy4jZWxlbWVudCA9IG51bGw7XHJcblx0fVxyXG5cclxuXHQjdG9nZ2xlTGlrZSgpIHtcclxuXHRcdHRoaXMuaXNMaWtlZCA9ICF0aGlzLmlzTGlrZWQ7XHJcblx0XHR0aGlzLiNidXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2J1dHRvbi1saWtlX2FjdGl2ZScpO1xyXG5cdH1cclxuXHJcblx0aGF2ZU15TGlrZSgpIHtcclxuXHRcdHRoaXMuI2xpa2VzLmZvckVhY2gobGlrZSA9PiB7XHJcblx0XHRcdGlmIChsaWtlLl9pZCA9PSB0aGlzLiNteUlEKSB7XHJcblx0XHRcdFx0dGhpcy4jdG9nZ2xlTGlrZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGNyZWF0ZSgpIHtcclxuXHRcdHRoaXMuI2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLiNsaW5rO1xyXG5cdFx0dGhpcy4jZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuI25hbWU7XHJcblx0XHR0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLiNuYW1lO1xyXG5cdFx0dGhpcy4jYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuaGF2ZU15TGlrZSgpO1xyXG5cdFx0cmV0dXJuIHRoaXMuI2VsZW1lbnQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBDYXJkIH07IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcblxyXG5cdCNzZXR0aW5ncztcclxuXHQjZm9ybTtcclxuXHQjaW5wdXRMaXN0O1xyXG5cdCNidXR0b25TdWJtaXQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuI3NldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLiNmb3JtID0gZm9ybVNlbGVjdG9yO1xyXG5cdFx0dGhpcy4jaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy4jc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG5cdFx0dGhpcy4jYnV0dG9uU3VibWl0ID0gdGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuI3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHR9XHJcblxyXG5cdCNzaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JNZXNzYWdlKSB7XHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG5cdFx0aW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLiNzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcblx0fVxyXG5cclxuXHQjaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuXHRcdGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcblx0XHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcblx0XHRlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG5cdH1cclxuXHJcblx0I2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG5cdFx0aWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG5cdFx0XHR0aGlzLiNzaG93SW5wdXRFcnJvcihpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0I2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuXHRcdHJldHVybiBpbnB1dExpc3Quc29tZShpbnB1dCA9PiB7XHJcblx0XHRcdHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdCNlbmFibGVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0KSB7XHJcblx0XHRidXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLiNzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHRcdGJ1dHRvblN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHQjZGlzYWJsZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQpIHtcclxuXHRcdGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cdFx0YnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuXHR9XHJcblxyXG5cdCNzZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLiNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG5cdFx0XHRpZiAodGhpcy4jaGFzSW52YWxpZElucHV0KHRoaXMuI2lucHV0TGlzdCkpIHtcclxuXHRcdFx0XHR0aGlzLiNlbmFibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLiNkaXNhYmxlU3VibWl0QnV0dG9uKHRoaXMuI2J1dHRvblN1Ym1pdCk7XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdHJlc2V0Rm9ybUVycm9ycygpIHtcclxuXHRcdHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG5cdFx0XHR0aGlzLiNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG5cdFx0XHR0aGlzLiNoaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLiNoYXNJbnZhbGlkSW5wdXQodGhpcy4jaW5wdXRMaXN0KSkge1xyXG5cdFx0XHR0aGlzLiNlbmFibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuI2Rpc2FibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcblx0XHR0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9OyIsImNsYXNzIFVzZXJJbmZvIHtcclxuXHJcblx0I3VzZXJOYW1lO1xyXG5cdCN1c2VyRGVzY3JpcHRpb247XHJcblx0I3VzZXJBdmF0YXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcblx0XHR0aGlzLiN1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuXHRcdHRoaXMuI3VzZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcblx0XHR0aGlzLiN1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHRnZXRVc2VySW5mbygpIHtcclxuXHRcdHJldHVybiB7IG5hbWU6IHRoaXMuI3VzZXJOYW1lLnRleHRDb250ZW50LCBkZXNjcmlwdGlvbjogdGhpcy4jdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50IH07XHJcblx0fVxyXG5cclxuXHRzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG5cdFx0dGhpcy4jdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cdFx0dGhpcy4jdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcblx0fVxyXG5cclxuXHRzZXRVc2VyQXZhdGFyKGxpbmspIHtcclxuXHRcdHRoaXMuI3VzZXJBdmF0YXIuc3JjID0gbGluaztcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFVzZXJJbmZvIH07IiwiY2xhc3MgU2VjdGlvbiB7XHJcblxyXG5cdCNyZW5kZXJlcjtcclxuXHQjY29udGFpbmVyO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLiNyZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cdFx0dGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJJdGVtcyhpdGVtcykge1xyXG5cdFx0aXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuI3JlbmRlcmVyKGl0ZW0pKTtcclxuXHR9XHJcblxyXG5cdGFkZEl0ZW0oaXRlbSkge1xyXG5cdFx0dGhpcy4jY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTZWN0aW9uIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBDb25maXJtRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG5cclxuXHQjZm9ybTtcclxuXHQjc3VibWl0YnV0dG9uO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3RvciwpIHtcclxuXHRcdHN1cGVyKHNlbGVjdG9yKTtcclxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuI2Zvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcblx0XHR0aGlzLiNzdWJtaXRidXR0b24gPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19jb25maXJtLWJ1dHRvbicpO1xyXG5cdH1cclxuXHJcblx0YWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHRzdXBlci5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0c2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG5cdFx0Y29uc3Qgc3VibWl0QWN0aW9uID0gKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHRhY3Rpb24oKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc3VibWl0QWN0aW9uID0gc3VibWl0QWN0aW9uLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLiNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0QWN0aW9uKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZVN1Ym1pdEFjdGlvbigpIHtcclxuXHRcdHRoaXMuI2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRBY3Rpb24pO1xyXG5cdFx0dGhpcy4jc3VibWl0YnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwQ29uZmlybURlbGV0ZSB9OyIsImNvbnN0IHZhbGlkYXRpb25TZXQgPSB7XHJcblx0aW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcblx0c3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ1dHRvbicsXHJcblx0aW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG5cdGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG5cdGVycm9yQ2xhc3M6ICdmb3JtX19lcnJvcl92aXNpYmxlJ1xyXG59XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhci1idXR0b24nKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gJyNlbGVtZW50JztcclxuY29uc3QgZm9ybVR5cGVBZGQgPSBkb2N1bWVudC5mb3Jtc1snYWRkLWZvcm0nXTtcclxuY29uc3QgZm9ybVR5cGVFZGl0ID0gZG9jdW1lbnQuZm9ybXNbJ2VkaXQtZm9ybSddO1xyXG5jb25zdCBmb3JtVHlwZUVkaXRBdmF0YXIgPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1hdmF0YXItZm9ybSddO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUtaW5wdXQnKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24taW5wdXQnKTtcclxuXHJcbmNvbnN0IEFQSV9DT05GSUcgPSB7XHJcblx0dXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01MicsXHJcblxyXG5cdGhlYWRlcnM6IHtcclxuXHRcdGF1dGhvcml6YXRpb246ICdlZDA2OGEyZi1jMTE3LTQyYTUtYTIzMi0xZTBkYjY2MTEwYmUnLFxyXG5cdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHR9LFxyXG59XHJcblxyXG5leHBvcnQge1xyXG5cdHZhbGlkYXRpb25TZXQsIHByb2ZpbGVFZGl0QnV0dG9uLCBwcm9maWxlQWRkQnV0dG9uLCBjYXJkVGVtcGxhdGUsXHJcblx0Zm9ybVR5cGVBZGQsIGZvcm1UeXBlRWRpdCwgY2FyZHNDb250YWluZXIsIHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG5cdGF2YXRhckVkaXRCdXR0b24sIGZvcm1UeXBlRWRpdEF2YXRhciwgQVBJX0NPTkZJR1xyXG59OyIsImltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm1EZWxldGUgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybURlbGV0ZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG5cdHZhbGlkYXRpb25TZXQsIHByb2ZpbGVBZGRCdXR0b24sIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG5cdGNhcmRUZW1wbGF0ZSwgZm9ybVR5cGVBZGQsIGZvcm1UeXBlRWRpdCwgY2FyZHNDb250YWluZXIsXHJcblx0cHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsIHByb2ZpbGVOYW1lSW5wdXQsXHJcblx0YXZhdGFyRWRpdEJ1dHRvbiwgZm9ybVR5cGVFZGl0QXZhdGFyLCBBUElfQ09ORklHXHJcbn1cclxuXHRmcm9tICcuLi91dGlscy9kYXRhLmpzJztcclxuXHJcbi8v0YHRgtC40LvQuCBieSB3ZWJwYWNrXHJcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcclxuXHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmxldCBNWV9JRDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoQVBJX0NPTkZJRyk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJywgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX3Bob3RvJyB9KTtcclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuXHRyZW5kZXJlcjogKGRhdGEpID0+IHtcclxuXHRcdGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xyXG5cdH1cclxufSwgY2FyZHNDb250YWluZXIpO1xyXG5cclxuY29uc3QgZ2V0VXNlckluZm9ybWF0aW9uID0gYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpXHJcblx0LnRoZW4oaW5mb3JtYXRpb24gPT4ge1xyXG5cdFx0dXNlckluZm8uc2V0VXNlckluZm8oaW5mb3JtYXRpb24ubmFtZSwgaW5mb3JtYXRpb24uYWJvdXQpO1xyXG5cdFx0dXNlckluZm8uc2V0VXNlckF2YXRhcihpbmZvcm1hdGlvbi5hdmF0YXIpO1xyXG5cdFx0TVlfSUQgPSBpbmZvcm1hdGlvbi5faWQ7XHJcblx0fSlcclxuXHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvbicsIGVycm9yKSk7XHJcblxyXG5jb25zdCBnZXRJbml0aWFsQ2FyZHMgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKClcclxuXHQudGhlbihjYXJkcyA9PiB7XHJcblx0XHRjYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG5cdH0pXHJcblx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSBnZXR0aW5nIGluaXRpYWwgY2FyZHMnLCBlcnJvcikpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2dldFVzZXJJbmZvcm1hdGlvbiwgZ2V0SW5pdGlhbENhcmRzXSlcclxuXHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG5cclxuY29uc3QgcG9wdXBUeXBlQ29uZmlybSA9IG5ldyBQb3B1cENvbmZpcm1EZWxldGUoJy5wb3B1cF90eXBlX2NvbmZpcm0tZGVsZXRlJyk7XHJcbmNvbnN0IGhhbmRsZURlbGV0ZUNhcmQgPSAoY2FyZCkgPT4ge1xyXG5cdHBvcHVwVHlwZUNvbmZpcm0ub3BlblBvcHVwKCk7XHJcblx0cG9wdXBUeXBlQ29uZmlybS5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG5cdFx0YXBpLmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuXHRcdFx0LnRoZW4oKCkgPT4gY2FyZC5yZW1vdmVDYXJkKCkpXHJcblx0XHRcdC50aGVuKCgpID0+IHBvcHVwVHlwZUNvbmZpcm0uY2xvc2VQb3B1cCgpKVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIGRlbGV0aW5nIGNhcmQnLCBlcnJvcikpXHJcblx0XHRcdC5maW5hbGx5KCgpID0+IHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHBvcHVwVHlwZUNvbmZpcm0ucmVtb3ZlU3VibWl0QWN0aW9uKCk7XHJcblx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTGlrZUNhcmQgPSAobGlrZWQsIGlkKSA9PiB7XHJcblx0aWYgKGxpa2VkKSB7XHJcblx0XHRyZXR1cm4gYXBpLnJlbW92ZUxpa2UoaWQpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gYXBpLnNldExpa2UoaWQpO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcG9wdXBUeXBlUHJldmlld1BpY3R1cmUgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoKTtcclxuXHJcbmNvbnN0IG9wZW5DYXJkUHJldmlldyA9IChuYW1lLCBsaW5rKSA9PiBwb3B1cFR5cGVQcmV2aWV3UGljdHVyZS5vcGVuUG9wdXAobmFtZSwgbGluayk7XHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG5cdGRhdGEubXlJRCA9IE1ZX0lEO1xyXG5cdHJldHVybiBuZXcgQ2FyZChvcGVuQ2FyZFByZXZpZXcsIGNhcmRUZW1wbGF0ZSwgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlTGlrZUNhcmQsIGRhdGEpXHJcblx0XHQuY3JlYXRlKCk7XHJcbn07XHJcblxyXG5jb25zdCBwb3B1cFR5cGVBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZC1jYXJkJywgKGRhdGEpID0+IHtcclxuXHRwb3B1cFR5cGVBZGRDYXJkLmxvYWRpbmcodHJ1ZSk7XHJcblx0YXBpLmNyZWF0ZUNhcmQoZGF0YSlcclxuXHRcdC50aGVuKChuZXdEYXRhKSA9PiB7XHJcblx0XHRcdGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmV3RGF0YSkpO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgY3JlYXRpbmcgY2FyZCcsIGVycm9yKSlcclxuXHRcdC5maW5hbGx5KCgpID0+IHBvcHVwVHlwZUFkZENhcmQubG9hZGluZyhmYWxzZSkpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0dmFsaWRhdG9yRm9ybVR5cGVBZGQucmVzZXRGb3JtRXJyb3JzKCk7XHJcblx0cG9wdXBUeXBlQWRkQ2FyZC5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFR5cGVFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnLCAoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSA9PiB7XHJcblx0cG9wdXBUeXBlRWRpdFByb2ZpbGUubG9hZGluZyh0cnVlKTtcclxuXHRhcGkudXBkYXRlVXNlckluZm9ybWF0aW9uKG5hbWUsIGRlc2NyaXB0aW9uKVxyXG5cdFx0LnRoZW4oKCkgPT4gdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pKVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSB1cGRhdGluZyB1c2VyIGluZm9ybWF0aW9uJywgZXJyb3IpKVxyXG5cdFx0LmZpbmFsbHkoKCkgPT4gcG9wdXBUeXBlRWRpdFByb2ZpbGUubG9hZGluZyhmYWxzZSkpO1xyXG59KVxyXG5cclxuY29uc3QgcG9wdXBUeXBlRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LWF2YXRhcicsICh7IGxpbmsgfSkgPT4ge1xyXG5cdHBvcHVwVHlwZUFkZENhcmQubG9hZGluZyh0cnVlKTtcclxuXHRhcGkudXBkYXRlQXZhdGFyKGxpbmspXHJcblx0XHQudGhlbigoKSA9PiB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGxpbmspKVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSB1cGRhdGluZyBhdmF0YXInLCBlcnJvcikpXHJcblx0XHQuZmluYWxseSgoKSA9PiBwb3B1cFR5cGVBZGRDYXJkLmxvYWRpbmcoZmFsc2UpKTtcclxufSlcclxuXHJcbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cG9wdXBUeXBlRWRpdEF2YXRhci5vcGVuUG9wdXAoKTtcclxuXHR2YWxpZGF0b3JGb3JtVHlwZUVkaXRBdmF0YXIucmVzZXRGb3JtRXJyb3JzKCk7XHJcbn0pXHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHQoeyBuYW1lOiBwcm9maWxlTmFtZUlucHV0LnZhbHVlLCBkZXNjcmlwdGlvbjogcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG5cdHBvcHVwVHlwZUVkaXRQcm9maWxlLm9wZW5Qb3B1cCgpO1xyXG5cdHZhbGlkYXRvckZvcm1UeXBlRWRpdC5yZXNldEZvcm1FcnJvcnMoKTtcclxufSk7XHJcblxyXG5jb25zdCB2YWxpZGF0b3JGb3JtVHlwZUFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXQsIGZvcm1UeXBlQWRkKTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybVR5cGVFZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldCwgZm9ybVR5cGVFZGl0KTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybVR5cGVFZGl0QXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldCwgZm9ybVR5cGVFZGl0QXZhdGFyKTtcclxudmFsaWRhdG9yRm9ybVR5cGVBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JGb3JtVHlwZUVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JGb3JtVHlwZUVkaXRBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuXHJcbiIsImNsYXNzIEFwaSB7XHJcblxyXG5cdCN1cmw7XHJcblx0I2hlYWRlcnM7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuXHRcdHRoaXMuI3VybCA9IGRhdGEudXJsO1xyXG5cdFx0dGhpcy4jaGVhZGVycyA9IGRhdGEuaGVhZGVycztcclxuXHR9XHJcblxyXG5cdHJlc3BvbnNlKGZldGNoKSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goKS50aGVuKHJlc3BvbnNlID0+IHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlLm9rKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cykpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRJbml0aWFsQ2FyZHMoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzIH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzIH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVVc2VySW5mb3JtYXRpb24obmFtZSwgYWJvdXQpIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vdXNlcnMvbWVgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnUEFUQ0gnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFx0bmFtZTogbmFtZSxcclxuXHRcdFx0XHRcdGFib3V0OiBhYm91dFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vY2FyZHNgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRcdFx0bGluazogbGlua1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGRlbGV0ZUNhcmQoaWQpIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZXRMaWtlKGlkKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlTGlrZShpZCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZUF2YXRhcihsaW5rKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdQQVRDSCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRhdmF0YXI6IGxpbmssXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEFwaSB9OyJdLCJuYW1lcyI6WyJQb3B1cCIsInNlbGVjdG9yIiwidGhpcyIsInBvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZVBvcHVwIiwiZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5IiwiUG9wdXBXaXRoSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVycyIsIm5hbWUiLCJsaW5rIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJpc0xvYWRpbmciLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dFZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiQ2FyZCIsIm9wZW5DYXJkUHJldmlldyIsInRlbXBsYXRlIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsImxpa2VzIiwiX2lkIiwib3duZXIiLCJteUlEIiwiaWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibGlrZUNvdW50IiwibGVuZ3RoIiwiaXNMaWtlZCIsImxpa2UiLCJoYXZlTXlMaWtlIiwidGhlbiIsImRhdGEiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInN0eWxlIiwiZGlzcGxheSIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uU3VibWl0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiZGVzY3JpcHRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIml0ZW1zIiwiaXRlbSIsInByZXBlbmQiLCJQb3B1cENvbmZpcm1EZWxldGUiLCJhY3Rpb24iLCJzdWJtaXRBY3Rpb24iLCJ2YWxpZGF0aW9uU2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImZvcm1UeXBlQWRkIiwiZm9ybXMiLCJmb3JtVHlwZUVkaXQiLCJmb3JtVHlwZUVkaXRBdmF0YXIiLCJjYXJkc0NvbnRhaW5lciIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsIk1ZX0lEIiwiYXBpIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJzdGF0dXMiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiY2FyZHNTZWN0aW9uIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJnZXRVc2VySW5mb3JtYXRpb24iLCJpbmZvcm1hdGlvbiIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJhbGwiLCJwb3B1cFR5cGVDb25maXJtIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmQiLCJvcGVuUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsImZpbmFsbHkiLCJzZXRUaW1lb3V0IiwicmVtb3ZlU3VibWl0QWN0aW9uIiwiaGFuZGxlTGlrZUNhcmQiLCJsaWtlZCIsInJlbW92ZUxpa2UiLCJzZXRMaWtlIiwicG9wdXBUeXBlUHJldmlld1BpY3R1cmUiLCJjcmVhdGUiLCJwb3B1cFR5cGVBZGRDYXJkIiwibG9hZGluZyIsIm5ld0RhdGEiLCJ2YWxpZGF0b3JGb3JtVHlwZUFkZCIsInJlc2V0Rm9ybUVycm9ycyIsInBvcHVwVHlwZUVkaXRQcm9maWxlIiwidXBkYXRlVXNlckluZm9ybWF0aW9uIiwicG9wdXBUeXBlRWRpdEF2YXRhciIsInVwZGF0ZUF2YXRhciIsInZhbGlkYXRvckZvcm1UeXBlRWRpdEF2YXRhciIsImdldFVzZXJJbmZvIiwidmFsaWRhdG9yRm9ybVR5cGVFZGl0IiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=
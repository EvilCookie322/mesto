(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){n(e,t),t.add(e)}function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var a=new WeakMap,u=new WeakSet,c=new WeakSet,l=function(){function l(e){var s,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t(this,c),t(this,u),r(this,"popup",void 0),r(this,"handleClosePopupPressEsc",void 0),p={writable:!0,value:void 0},n(this,s=a),s.set(this,p),this.popup=document.querySelector(e),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,i(e,t,"set"),n)}(this,a,this.popup.querySelector(".popup__close-button")),this.handleClosePopupPressEsc=o(this,c,f).bind(this)}var p,h;return p=l,(h=[{key:"addEventListeners",value:function(){var e,t=this;(this,e=a,function(e,t){return t.get?t.get.call(e):t.value}(this,i(this,e,"get"))).addEventListener("click",(function(){return t.closePopup()})),this.popup.addEventListener("click",(function(e){return o(t,u,s).call(t,e)}))}},{key:"openPopup",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",this.handleClosePopupPressEsc)}},{key:"closePopup",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleClosePopupPressEsc)}}])&&e(p.prototype,h),Object.defineProperty(p,"prototype",{writable:!1}),l}();function s(e){e.target.classList.contains("popup_opened")&&this.closePopup()}function f(e){"Escape"===e.key&&this.closePopup()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function k(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_(e,t,"get"))}function E(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_(e,t,"set"),n),n}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var S=new WeakMap,P=new WeakMap,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),g(w(e=i.call(this,".popup_type_preview-picture")),S,{writable:!0,value:void 0}),g(w(e),P,{writable:!0,value:void 0}),E(w(e),S,e.popup.querySelector(".popup__image")),E(w(e),P,e.popup.querySelector(".popup__name")),e.addEventListeners(),e}return t=a,(n=[{key:"openPopup",value:function(e,t){k(this,P).textContent=e,k(this,S).src=t,k(this,S).alt=e,d(m(a.prototype),"openPopup",this).call(this)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=W(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function W(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function M(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function R(e,t,n){x(e,t),t.set(e,n)}function x(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var B=new WeakMap,z=new WeakMap,F=new WeakMap,N=new WeakMap,V=new WeakMap,J=new WeakSet,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e,t){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),x(r=q(n=i.call(this,e)),o=J),o.add(r),R(q(n),B,{writable:!0,value:void 0}),R(q(n),z,{writable:!0,value:void 0}),R(q(n),F,{writable:!0,value:void 0}),R(q(n),N,{writable:!0,value:void 0}),R(q(n),V,{writable:!0,value:void 0}),U(q(n),B,t),U(q(n),z,n.popup.querySelector(".form")),U(q(n),F,Array.from(I(q(n),z).querySelectorAll(".form__input"))),U(q(n),N,I(q(n),z).querySelector(".form__submit-button")),U(q(n),V,I(q(n),N).textContent),n.addEventListeners(),n}return t=a,(n=[{key:"addEventListeners",value:function(){var e=this;T(A(a.prototype),"addEventListeners",this).call(this),I(this,z).addEventListener("submit",(function(t){t.preventDefault(),I(e,B).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,J,$).call(e))}))}},{key:"closePopup",value:function(){T(A(a.prototype),"closePopup",this).call(this),I(this,z).reset()}},{key:"loading",value:function(e){e?(I(this,N).textContent="Сохранение...",I(this,N).setAttribute("disabled",!0)):(I(this,N).removeAttribute("disabled"),I(this,N).textContent=I(this,V))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function $(){var e={};return I(this,F).forEach((function(t){return e[t.name]=t.value})),e}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){X(e,t),t.add(e)}function Q(e,t,n){X(e,t),t.set(e,n)}function X(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Y(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Z(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,te(e,t,"get"))}function ee(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,te(e,t,"set"),n),n}function te(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakMap,ae=new WeakMap,ue=new WeakMap,ce=new WeakMap,le=new WeakMap,se=new WeakMap,fe=new WeakMap,pe=new WeakMap,he=new WeakMap,de=new WeakSet,ve=new WeakSet,ye=new WeakSet,be=function(){function e(t,n,r,o,i){var a=i.likes,u=i._id,c=i.name,l=i.link,s=i.owner,f=i.myID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,ye),K(this,ve),K(this,de),Q(this,ne,{writable:!0,value:void 0}),Q(this,re,{writable:!0,value:void 0}),Q(this,oe,{writable:!0,value:void 0}),Q(this,ie,{writable:!0,value:void 0}),Q(this,ae,{writable:!0,value:void 0}),Q(this,ue,{writable:!0,value:void 0}),Q(this,ce,{writable:!0,value:void 0}),Q(this,le,{writable:!0,value:void 0}),Q(this,se,{writable:!0,value:void 0}),Q(this,fe,{writable:!0,value:void 0}),Q(this,pe,{writable:!0,value:void 0}),Q(this,he,{writable:!0,value:void 0}),ee(this,re,t),ee(this,oe,r),ee(this,ie,o),ee(this,ue,c),ee(this,ce,l),this.id=u,ee(this,ne,f),ee(this,le,s),ee(this,se,document.querySelector(n).content.querySelector(".element").cloneNode(!0)),ee(this,fe,Z(this,se).querySelector(".element__image")),ee(this,ae,Z(this,se).querySelector(".element__button-like")),ee(this,he,Z(this,se).querySelector(".element__button-trash")),ee(this,pe,a),this.likeCount=Z(this,se).querySelector(".element__like-count"),this.likeCount.textContent=a.length,this.isLiked=!1}var t,n;return t=e,(n=[{key:"setLike",value:function(e){this.likeCount.textContent=e,Y(this,ye,ge).call(this)}},{key:"removeCard",value:function(){Z(this,se).remove(),ee(this,se,null)}},{key:"haveMyLike",value:function(){var e=this;Z(this,pe).forEach((function(t){t._id==Z(e,ne)&&Y(e,ye,ge).call(e)}))}},{key:"create",value:function(){return Z(this,fe).src=Z(this,ce),Z(this,fe).alt=Z(this,ue),Z(this,se).querySelector(".element__name").textContent=Z(this,ue),Y(this,de,we).call(this),this.haveMyLike(),Z(this,se)}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function we(){var e=this;Z(this,fe).addEventListener("click",(function(){return Z(e,re).call(e,Z(e,ue),Z(e,ce))})),Z(this,ae).addEventListener("click",(function(){Z(e,ie).call(e,e.isLiked,e.id,e.setLike.bind(e))})),Z(this,le)._id==Z(this,ne)&&(Z(this,he).style.display="block",Z(this,he).addEventListener("click",(function(){return Y(e,ve,me).call(e)})))}function me(){Z(this,oe).call(this,this)}function ge(){this.isLiked=!this.isLiked,Z(this,ae).classList.toggle("element__button-like_active")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){Se(e,t),t.add(e)}function _e(e,t,n){Se(e,t),t.set(e,n)}function Se(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Oe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ce(e,t,"get"))}function je(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ce(e,t,"set"),n),n}function Ce(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Te=new WeakMap,We=new WeakMap,Le=new WeakMap,Me=new WeakMap,qe=new WeakSet,Ae=new WeakSet,Re=new WeakSet,xe=new WeakSet,Ie=new WeakSet,Ue=new WeakSet,De=new WeakSet,Be=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ee(this,De),Ee(this,Ue),Ee(this,Ie),Ee(this,xe),Ee(this,Re),Ee(this,Ae),Ee(this,qe),_e(this,Te,{writable:!0,value:void 0}),_e(this,We,{writable:!0,value:void 0}),_e(this,Le,{writable:!0,value:void 0}),_e(this,Me,{writable:!0,value:void 0}),je(this,Te,t),je(this,We,n),je(this,Le,Array.from(Oe(this,We).querySelectorAll(Oe(this,Te).inputSelector))),je(this,Me,Oe(this,We).querySelector(Oe(this,Te).submitButtonSelector))}var t,n;return t=e,(n=[{key:"resetFormErrors",value:function(){var e=this;Oe(this,Le).forEach((function(t){Pe(e,Re,Ne).call(e,t),Pe(e,Ae,Fe).call(e,t)})),Pe(this,xe,Ve).call(this,Oe(this,Le))?Pe(this,Ie,Je).call(this,Oe(this,Me)):Pe(this,Ue,He).call(this,Oe(this,Me))}},{key:"enableValidation",value:function(){Pe(this,De,$e).call(this)}}])&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ze(e,t){var n=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.add(Oe(this,Te).inputErrorClass),n.textContent=t,n.classList.add(Oe(this,Te).errorClass)}function Fe(e){var t=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.remove(Oe(this,Te).inputErrorClass),t.classList.remove(Oe(this,Te).errorClass),t.textContent=""}function Ne(e){e.validity.valid?Pe(this,Ae,Fe).call(this,e):Pe(this,qe,ze).call(this,e,e.validationMessage)}function Ve(e){return e.some((function(e){return!e.validity.valid}))}function Je(e){e.classList.add(Oe(this,Te).inactiveButtonClass),e.setAttribute("disabled",!0)}function He(e){e.classList.remove(Oe(this,Te).inactiveButtonClass),e.removeAttribute("disabled")}function $e(){var e=this;Oe(this,Le).forEach((function(t){return t.addEventListener("input",(function(){Pe(e,Re,Ne).call(e,t),Pe(e,xe,Ve).call(e,Oe(e,Le))?Pe(e,Ie,Je).call(e,Oe(e,Me)):Pe(e,Ue,He).call(e,Oe(e,Me))}))}))}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function Xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ye(e,t,"set"),n),n}function Ye(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=function(){function e(t){var n=t.nameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ke(this,Ze,{writable:!0,value:void 0}),Ke(this,et,{writable:!0,value:void 0}),Ke(this,tt,{writable:!0,value:void 0}),Xe(this,Ze,document.querySelector(n)),Xe(this,et,document.querySelector(r)),Xe(this,tt,document.querySelector(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Qe(this,Ze).textContent,description:Qe(this,et).textContent}}},{key:"setUserInfo",value:function(e,t){Qe(this,Ze).textContent=e,Qe(this,et).textContent=t}},{key:"setUserAvatar",value:function(e){Qe(this,tt).src=e}}])&&Ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function it(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ut(e,t,"get"))}function at(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ut(e,t,"set"),n),n}function ut(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ct=new WeakMap,lt=new WeakMap,st=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot(this,ct,{writable:!0,value:void 0}),ot(this,lt,{writable:!0,value:void 0}),at(this,ct,r),at(this,lt,n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return it(t,ct).call(t,e)}))}},{key:"addServerItem",value:function(e){it(this,lt).append(e)}},{key:"addItem",value:function(e){it(this,lt).prepend(e)}}])&&rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(){return ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=dt(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ht.apply(this,arguments)}function dt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wt(e)););return e}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function yt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function mt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function gt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Et(e,t,"get"))}function kt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Et(e,t,"set"),n),n}function Et(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _t=new WeakMap,St=new WeakMap,Pt=new WeakMap,Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(r);if(o){var n=wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),mt(bt(t=i.call(this,e)),_t,{writable:!0,value:void 0}),mt(bt(t),St,{writable:!0,value:void 0}),mt(bt(t),Pt,{writable:!0,value:void 0}),t.addEventListeners(),kt(bt(t),_t,t.popup.querySelector(".form")),kt(bt(t),St,gt(bt(t),_t).querySelector(".form__confirm-button")),kt(bt(t),Pt,gt(bt(t),St).textContent),t}return t=a,(n=[{key:"setSubmitAction",value:function(e){this.submitAction=function(t){t.preventDefault(),e()}.bind(this),gt(this,_t).addEventListener("submit",this.submitAction)}},{key:"removeSubmitAction",value:function(){gt(this,_t).removeEventListener("submit",this.submitAction)}},{key:"deleting",value:function(e){e?(gt(this,St).textContent="Удаление...",gt(this,St).setAttribute("disabled",!0)):(gt(this,St).removeAttribute("disabled"),gt(this,St).textContent=gt(this,Pt))}},{key:"closePopup",value:function(){this.removeSubmitAction(),ht(wt(a.prototype),"closePopup",this).call(this)}}])&&pt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l),jt={inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},Ct=document.querySelector(".profile__edit-button"),Tt=document.querySelector(".profile__add-button"),Wt=document.querySelector(".profile__edit-avatar-button"),Lt=document.forms["add-form"],Mt=document.forms["edit-form"],qt=document.forms["edit-avatar-form"],At=document.querySelector(".elements"),Rt=document.querySelector("#name-input"),xt=document.querySelector("#description-input");function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Dt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,zt(e,t,"get"))}function Bt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,zt(e,t,"set"),n),n}function zt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ft,Nt=new WeakMap,Vt=new WeakMap;function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ht=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ut(this,Nt,{writable:!0,value:void 0}),Ut(this,Vt,{writable:!0,value:void 0}),Bt(this,Nt,t.url),Bt(this,Vt,t.headers)}var t,n;return t=e,(n=[{key:"response",value:function(e){return e().then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return console.log("Error while sending request",e),!1}))}},{key:"getInitialCards",value:function(){var e=this;return this.response((function(){return fetch("".concat(Dt(e,Nt),"/cards"),{headers:Dt(e,Vt)})}))}},{key:"getUserInformation",value:function(){var e=this;return this.response((function(){return fetch("".concat(Dt(e,Nt),"/users/me"),{headers:Dt(e,Vt)})}))}},{key:"updateUserInformation",value:function(e,t){var n=this;return this.response((function(){return fetch("".concat(Dt(n,Nt),"/users/me"),{method:"PATCH",headers:Dt(n,Vt),body:JSON.stringify({name:e,about:t})})}))}},{key:"createCard",value:function(e){var t=this,n=e.name,r=e.link;return this.response((function(){return fetch("".concat(Dt(t,Nt),"/cards"),{method:"POST",headers:Dt(t,Vt),body:JSON.stringify({name:n,link:r})})}))}},{key:"deleteCard",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Dt(t,Nt),"/cards/").concat(e),{method:"DELETE",headers:Dt(t,Vt)})}))}},{key:"setLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Dt(t,Nt),"/cards/").concat(e,"/likes"),{method:"PUT",headers:Dt(t,Vt)})}))}},{key:"removeLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Dt(t,Nt),"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Dt(t,Vt)})}))}},{key:"updateAvatar",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Dt(t,Nt),"/users/me/avatar"),{method:"PATCH",headers:Dt(t,Vt),body:JSON.stringify({avatar:e})})}))}}])&&It(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"ed068a2f-c117-42a5-a232-1e0db66110be","Content-Type":"application/json"}}),$t=new nt({nameSelector:".profile__name",descriptionSelector:".profile__description",avatarSelector:".profile__photo"}),Gt=new st({renderer:function(e){Gt.addServerItem(en(e))}},At);Promise.all([Ht.getUserInformation(),Ht.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];o&&($t.setUserInfo(o.name,o.about),$t.setUserAvatar(o.avatar),Ft=o._id),i&&Gt.renderItems(i)})).catch((function(e){return console.error(e)}));var Kt=new Ot(".popup_type_confirm-delete"),Qt=function(e){Kt.openPopup(),Kt.setSubmitAction((function(){return Kt.deleting(!0),Ht.deleteCard(e.id).then((function(t){t&&(e.removeCard(),Kt.closePopup(),setTimeout((function(){Kt.deleting(!1)}),500))})).catch((function(e){return console.log("Error while deleting card",e)}))}))},Xt=function(e,t,n){!function(e,t){e.then((function(e){e&&t(e.likes.length)})).catch((function(e){return console.log("Error while toggling like",e)}))}(e?Ht.removeLike(t):Ht.setLike(t),n)},Yt=new O,Zt=function(e,t){return Yt.openPopup(e,t)},en=function(e){return e.myID=Ft,new be(Zt,"#element",Qt,Xt,e).create()},tn=new H(".popup_type_add-card",(function(e){return tn.loading(!0),Ht.createCard(e).then((function(e){e&&(Gt.addItem(en(e)),tn.closePopup()),setTimeout((function(){tn.loading(!1)}),500)})).catch((function(e){return console.log("Error while creating card",e)}))}));Tt.addEventListener("click",(function(){on.resetFormErrors(),tn.openPopup()}));var nn=new H(".popup_type_edit-profile",(function(e){var t=e.name,n=e.description;return nn.loading(!0),Ht.updateUserInformation(t,n).then((function(e){e&&($t.setUserInfo(t,n),nn.closePopup()),setTimeout((function(){nn.loading(!1)}),500)})).catch((function(e){return console.log("Error while updating user information",e)}))})),rn=new H(".popup_type_edit-avatar",(function(e){var t=e.link;return rn.loading(!0),Ht.updateAvatar(t).then((function(e){e&&($t.setUserAvatar(t),rn.closePopup()),setTimeout((function(){rn.loading(!1)}),500)})).catch((function(e){return console.log("Error while updating avatar",e)}))}));Wt.addEventListener("click",(function(){rn.openPopup(),un.resetFormErrors()})),Ct.addEventListener("click",(function(){var e=$t.getUserInfo();Rt.value=e.name,xt.value=e.description,nn.openPopup(),an.resetFormErrors()}));var on=new Be(jt,Lt),an=new Be(jt,Mt),un=new Be(jt,qt);on.enableValidation(),an.enableValidation(),un.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoic3RCQUFNQSxFQUFLLFdBTVYsV0FBWUMsRyxxR0FBVSw4RixFQUFBLDJCLEVBQUEsSyxFQUFBLEcsTUFBQSxLLEdBQ3JCQyxLQUFLQyxNQUFRQyxTQUFTQyxjQUFjSixHLDZLQUNwQyxDQUFBQyxLQUFJLEVBQWdCQSxLQUFLQyxNQUFNRSxjQUFjLHlCQUM3Q0gsS0FBS0kseUJBQTJCLEVBQUFKLEtBQUksS0FBMkJLLEtBQUtMLEtBQ3JFLEMsUUEyQkMsTyxFQTNCQSxHLEVBQUEsZ0NBRUQsV0FBb0IsSSxFQUFBLFFBQ25CQSxLLEVBQUksRSxrREFBSkEsSyxFQUFBQSxLLFdBQWtCTSxpQkFBaUIsU0FBUyxrQkFBTSxFQUFLQyxZQUFZLElBQ25FUCxLQUFLQyxNQUFNSyxpQkFBaUIsU0FBUyxTQUFDRSxHQUFDLFNBQUssRUFBSSxVQUFKLEVBQW1DQSxFQUFDLEdBQ2pGLEdBQUMsdUJBY0QsV0FDQ1IsS0FBS0MsTUFBTVEsVUFBVUMsSUFBSSxnQkFDekJSLFNBQVNJLGlCQUFpQixVQUFXTixLQUFLSSx5QkFDM0MsR0FBQyx3QkFFRCxXQUNDSixLQUFLQyxNQUFNUSxVQUFVRSxPQUFPLGdCQUM1QlQsU0FBU1Usb0JBQW9CLFVBQVdaLEtBQUtJLHlCQUM5QyxNLG9FQUFDLEVBckNTLEdBcUNULFdBcEI2QlMsR0FDekJBLEVBQU1DLE9BQU9MLFVBQVVNLFNBQVMsaUJBQ25DZixLQUFLTyxZQUVQLENBQUMsV0FFeUJNLEdBQ1AsV0FBZEEsRUFBTUcsS0FDVGhCLEtBQUtPLFlBRVAsQyxreURDM0JrQyxnQ0FFN0JVLEVBQWMsYSxxUkFBQSxVLFFBQUEsRyxFQUFBLEUsK1lBS25CLGFBQWMsTUFJWSxPLDRGQUpaLFNBQ3dCLElBQXJDLGNBQU0sZ0NBQStCLG1FQUNyQyxTQUFjLEVBQUtoQixNQUFNRSxjQUFjLGtCQUN2QyxTQUFhLEVBQUtGLE1BQU1FLGNBQWMsaUJBQ3RDLEVBQUtlLG9CQUFvQixDQUMxQixDQU9DLE8sRUFQQSxHLEVBQUEsd0JBRUQsU0FBVUMsRUFBTUMsR0FDZixFQUFBcEIsS0FBSSxHQUFPcUIsWUFBY0YsRUFDekIsRUFBQW5CLEtBQUksR0FBUXNCLElBQU1GLEVBQ2xCLEVBQUFwQixLQUFJLEdBQVF1QixJQUFNSixFQUNsQiw2Q0FDRCxNLG9FQUFDLEVBakJrQixDQUFTckIsRyxveURDRkcsd0ZBRTFCMEIsRUFBYSxhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFRbEIsV0FBWXpCLEVBQVUwQixHQUFjLE0sSUFPVixPLDRGQVBVLFMsSUFDbkIsRUFBaEIsY0FBTTFCLEksRUFBVSxHLFNBQUEseUxBQ2hCLFNBQXFCMEIsR0FDckIsU0FBYSxFQUFLeEIsTUFBTUUsY0FBYyxVQUN0QyxTQUFtQnVCLE1BQU1DLEtBQUssVUFBV0MsaUJBQWlCLGtCQUMxRCxTQUFxQixVQUFXekIsY0FBYyx5QkFDOUMsU0FBeUIsVUFBbUJrQixhQUM1QyxFQUFLSCxvQkFBb0IsQ0FDMUIsQ0E2QkMsTyxFQTdCQSxHLEVBQUEsZ0NBUUQsV0FBb0IsV0FDbkIsc0RBQ0EsRUFBQWxCLEtBQUksR0FBT00saUJBQWlCLFVBQVUsU0FBQ0UsR0FDdENBLEVBQUVxQixpQkFDRixJQUFJLFFBQUosRSw0R0FBSSxDQUFlLEVBQUksVUFBSixHQUNwQixHQUNELEdBQUMsd0JBRUQsV0FDQywrQ0FDQSxFQUFBN0IsS0FBSSxHQUFPOEIsT0FDWixHQUFDLHFCQUVELFNBQVFDLEdBQ0hBLEdBQ0gsRUFBQS9CLEtBQUksR0FBZXFCLFlBQWMsZ0JBQ2pDLEVBQUFyQixLQUFJLEdBQWVnQyxhQUFhLFlBQVksS0FFNUMsRUFBQWhDLEtBQUksR0FBZWlDLGdCQUFnQixZQUNuQyxFQUFBakMsS0FBSSxHQUFlcUIsWUFBYyxFQUFBckIsS0FBSSxHQUV2QyxNLG9FQUFDLEVBN0NpQixDQUFTRixHQUFLLGFBbUIvQixJQUFNb0MsRUFBYyxDQUFDLEVBRXJCLE9BREEsRUFBQWxDLEtBQUksR0FBYW1DLFNBQVEsU0FBQUMsR0FBSyxPQUFJRixFQUFZRSxFQUFNakIsTUFBUWlCLEVBQU1DLEtBQUssSUFDaEVILENBQ1IsQyx5akNDeEJLSSxHQUFJLFdBaUJULFdBQVlDLEVBQWlCQyxFQUFVQyxFQUFjQyxFQUFZLEdBQXlDLElBQXZDQyxFQUFLLEVBQUxBLE1BQU9DLEVBQUcsRUFBSEEsSUFBS3pCLEVBQUksRUFBSkEsS0FBTUMsRUFBSSxFQUFKQSxLQUFNeUIsRUFBSyxFQUFMQSxNQUFPQyxFQUFJLEVBQUpBLE0sNEZBQUksa2ZBQ3JHLEdBQUE5QyxLQUFJLEdBQW9CdUMsR0FDeEIsR0FBQXZDLEtBQUksR0FBaUJ5QyxHQUNyQixHQUFBekMsS0FBSSxHQUFlMEMsR0FDbkIsR0FBQTFDLEtBQUksR0FBU21CLEdBQ2IsR0FBQW5CLEtBQUksR0FBU29CLEdBQ2JwQixLQUFLK0MsR0FBS0gsRUFDVixHQUFBNUMsS0FBSSxHQUFTOEMsR0FDYixHQUFBOUMsS0FBSSxHQUFVNkMsR0FDZCxHQUFBN0MsS0FBSSxHQUFZRSxTQUFTQyxjQUFjcUMsR0FBVVEsUUFDL0M3QyxjQUFjLFlBQVk4QyxXQUFVLElBQ3RDLEdBQUFqRCxLQUFJLEdBQWlCLEVBQUFBLEtBQUksSUFBVUcsY0FBYyxvQkFDakQsR0FBQUgsS0FBSSxHQUFlLEVBQUFBLEtBQUksSUFBVUcsY0FBYywwQkFDL0MsR0FBQUgsS0FBSSxHQUFpQixFQUFBQSxLQUFJLElBQVVHLGNBQWMsMkJBQ2pELEdBQUFILEtBQUksR0FBVTJDLEdBQ2QzQyxLQUFLa0QsVUFBWSxFQUFBbEQsS0FBSSxJQUFVRyxjQUFjLHdCQUM3Q0gsS0FBS2tELFVBQVU3QixZQUFjc0IsRUFBTVEsT0FDbkNuRCxLQUFLb0QsU0FBVSxDQUNoQixDLFFBK0NDLE8sRUEvQ0EsRyxFQUFBLHNCQWFELFNBQVFDLEdBQ1ByRCxLQUFLa0QsVUFBVTdCLFlBQWNnQyxFQUM3QixFQUFBckQsS0FBSSxZQUFKQSxLQUNELEdBQUMsd0JBTUQsV0FDQyxFQUFBQSxLQUFJLElBQVVXLFNBQ2QsR0FBQVgsS0FBSSxHQUFZLEtBQ2pCLEdBQUMsd0JBT0QsV0FBYSxXQUNaLEVBQUFBLEtBQUksSUFBUW1DLFNBQVEsU0FBQW1CLEdBQ2ZBLEVBQUtWLEtBQU8sSUFBSSxLQUNuQixJQUFJLFlBQUosRUFFRixHQUNELEdBQUMsb0JBRUQsV0FNQyxPQUxBLEVBQUE1QyxLQUFJLElBQWVzQixJQUFNLEVBQUF0QixLQUFJLElBQzdCLEVBQUFBLEtBQUksSUFBZXVCLElBQU0sRUFBQXZCLEtBQUksSUFDN0IsRUFBQUEsS0FBSSxJQUFVRyxjQUFjLGtCQUFrQmtCLFlBQWMsRUFBQXJCLEtBQUksSUFDaEUsRUFBQUEsS0FBSSxZQUFKQSxNQUNBQSxLQUFLdUQsYUFDRSxFQUFBdkQsS0FBSSxHQUNaLE0sb0VBQUMsRUFsRlEsR0FrRlIsY0E3Q29CLFdBQ3BCLEVBQUFBLEtBQUksSUFBZU0saUJBQWlCLFNBQVMsb0JBQU0sRUFBSSxTQUFKLEVBQUksRUFBa0IsRUFBSSxNQUFRLEVBQUksUUFDekYsRUFBQU4sS0FBSSxJQUFhTSxpQkFBaUIsU0FBUyxXQUMxQyxJQUFJLFNBQUosRUFBaUIsRUFBSzhDLFFBQVMsRUFBS0wsR0FBSSxFQUFLUyxRQUFRbkQsS0FBSyxHQUMzRCxJQUNJLEVBQUFMLEtBQUksSUFBUTRDLEtBQU8sRUFBQTVDLEtBQUksTUFDMUIsRUFBQUEsS0FBSSxJQUFleUQsTUFBTUMsUUFBVSxRQUNuQyxFQUFBMUQsS0FBSSxJQUFlTSxpQkFBaUIsU0FBUyxvQkFBTSxFQUFJLFlBQUosRUFBSSxJQUV6RCxDQUFDLGNBUUEsRUFBQU4sS0FBSSxTQUFKQSxLQUFtQkEsS0FDcEIsQ0FBQyxjQVFBQSxLQUFLb0QsU0FBV3BELEtBQUtvRCxRQUNyQixFQUFBcEQsS0FBSSxJQUFhUyxVQUFVa0QsT0FBTyw4QkFDbkMsQyxxZ0NDakVLQyxHQUFhLFdBT2xCLFdBQVlDLEVBQVVDLEksNEZBQWMseVBBQ25DLEdBQUE5RCxLQUFJLEdBQWE2RCxHQUNqQixHQUFBN0QsS0FBSSxHQUFTOEQsR0FDYixHQUFBOUQsS0FBSSxHQUFjMEIsTUFBTUMsS0FBSyxHQUFBM0IsS0FBSSxJQUFPNEIsaUJBQWlCLEdBQUE1QixLQUFJLElBQVcrRCxpQkFDeEUsR0FBQS9ELEtBQUksR0FBaUIsR0FBQUEsS0FBSSxJQUFPRyxjQUFjLEdBQUFILEtBQUksSUFBV2dFLHNCQUM5RCxDLFFBaUVDLE8sRUFqRUEsRyxFQUFBLDhCQW1ERCxXQUFrQixXQUNqQixHQUFBaEUsS0FBSSxJQUFZbUMsU0FBUSxTQUFDQyxHQUN4QixLQUFJLFlBQUosRUFBeUJBLEdBQ3pCLEtBQUksWUFBSixFQUFxQkEsRUFDdEIsSUFDSSxHQUFBcEMsS0FBSSxZQUFKQSxLQUFJLEdBQWtCQSxLQUFJLEtBQzdCLEdBQUFBLEtBQUksWUFBSkEsS0FBSSxHQUFxQkEsS0FBSSxLQUU3QixHQUFBQSxLQUFJLFlBQUpBLEtBQUksR0FBc0JBLEtBQUksSUFFaEMsR0FBQyw4QkFFRCxXQUNDLEdBQUFBLEtBQUksWUFBSkEsS0FDRCxNLHFFQUFDLEVBN0VpQixHQTZFakIsWUEvRGVvQyxFQUFPNkIsR0FDdEIsSUFBTUMsRUFBZSxHQUFBbEUsS0FBSSxJQUFPRyxjQUFjLElBQUQsT0FBS2lDLEVBQU1XLEdBQUUsV0FDMURYLEVBQU0zQixVQUFVQyxJQUFJLEdBQUFWLEtBQUksSUFBV21FLGlCQUNuQ0QsRUFBYTdDLFlBQWM0QyxFQUMzQkMsRUFBYXpELFVBQVVDLElBQUksR0FBQVYsS0FBSSxJQUFXb0UsV0FDM0MsQ0FBQyxZQUVlaEMsR0FDZixJQUFNOEIsRUFBZSxHQUFBbEUsS0FBSSxJQUFPRyxjQUFjLElBQUQsT0FBS2lDLEVBQU1XLEdBQUUsV0FDMURYLEVBQU0zQixVQUFVRSxPQUFPLEdBQUFYLEtBQUksSUFBV21FLGlCQUN0Q0QsRUFBYXpELFVBQVVFLE9BQU8sR0FBQVgsS0FBSSxJQUFXb0UsWUFDN0NGLEVBQWE3QyxZQUFjLEVBQzVCLENBQUMsWUFFbUJlLEdBQ2RBLEVBQU1pQyxTQUFTQyxNQUduQixHQUFBdEUsS0FBSSxZQUFKQSxLQUFxQm9DLEdBRnJCLEdBQUFwQyxLQUFJLFlBQUpBLEtBQXFCb0MsRUFBT0EsRUFBTW1DLGtCQUlwQyxDQUFDLFlBRWdCQyxHQUNoQixPQUFPQSxFQUFVQyxNQUFLLFNBQUFyQyxHQUNyQixPQUFRQSxFQUFNaUMsU0FBU0MsS0FDeEIsR0FDRCxDQUFDLFlBRW1CSSxHQUNuQkEsRUFBYWpFLFVBQVVDLElBQUksR0FBQVYsS0FBSSxJQUFXMkUscUJBQzFDRCxFQUFhMUMsYUFBYSxZQUFZLEVBQ3ZDLENBQUMsWUFFb0IwQyxHQUNwQkEsRUFBYWpFLFVBQVVFLE9BQU8sR0FBQVgsS0FBSSxJQUFXMkUscUJBQzdDRCxFQUFhekMsZ0JBQWdCLFdBQzlCLENBQUMsY0FFb0IsV0FDcEIsR0FBQWpDLEtBQUksSUFBWW1DLFNBQVEsU0FBQUMsR0FBSyxPQUFJQSxFQUFNOUIsaUJBQWlCLFNBQVMsV0FDaEUsS0FBSSxZQUFKLEVBQXlCOEIsR0FDckIsS0FBSSxZQUFKLEVBQUksR0FBa0IsRUFBSSxLQUM3QixLQUFJLFlBQUosRUFBSSxHQUFxQixFQUFJLEtBRTdCLEtBQUksWUFBSixFQUFJLEdBQXNCLEVBQUksSUFFaEMsR0FBRSxHQUNILEMsd3ZCQzdES3dDLEdBQVEsV0FNYixjQUFtRSxJQUFyREMsRUFBWSxFQUFaQSxhQUFjQyxFQUFtQixFQUFuQkEsb0JBQXFCQyxFQUFjLEVBQWRBLGdCLDRGQUFjLDhIQUM5RCxHQUFBL0UsS0FBSSxHQUFhRSxTQUFTQyxjQUFjMEUsSUFDeEMsR0FBQTdFLEtBQUksR0FBb0JFLFNBQVNDLGNBQWMyRSxJQUMvQyxHQUFBOUUsS0FBSSxHQUFlRSxTQUFTQyxjQUFjNEUsR0FDM0MsQyxRQWFDLE8sRUFiQSxHLEVBQUEsMEJBRUQsV0FDQyxNQUFPLENBQUU1RCxLQUFNLEdBQUFuQixLQUFJLElBQVdxQixZQUFhMkQsWUFBYSxHQUFBaEYsS0FBSSxJQUFrQnFCLFlBQy9FLEdBQUMseUJBRUQsU0FBWUYsRUFBTTZELEdBQ2pCLEdBQUFoRixLQUFJLElBQVdxQixZQUFjRixFQUM3QixHQUFBbkIsS0FBSSxJQUFrQnFCLFlBQWMyRCxDQUNyQyxHQUFDLDJCQUVELFNBQWM1RCxHQUNiLEdBQUFwQixLQUFJLElBQWFzQixJQUFNRixDQUN4QixNLHFFQUFDLEVBdkJZLEcseXVCQ0FSNkQsR0FBTyxXQUtaLGFBQTBCQyxHQUFtQixJQUEvQkMsRUFBUSxFQUFSQSxVLDRGQUFRLHVGQUNyQixHQUFBbkYsS0FBSSxHQUFhbUYsR0FDakIsR0FBQW5GLEtBQUksR0FBY2tGLEVBQ25CLEMsUUFZQyxPLEVBWkEsRyxFQUFBLDBCQUVELFNBQVlFLEdBQU8sV0FDbEJBLEVBQU1qRCxTQUFRLFNBQUFrRCxHQUFJLFVBQUksRUFBSSxTQUFKLEVBQWVBLEVBQUksR0FDMUMsR0FBQywyQkFFRCxTQUFjQSxHQUNiLEdBQUFyRixLQUFJLElBQVlzRixPQUFPRCxFQUN4QixHQUFDLHFCQUVELFNBQVFBLEdBQ1AsR0FBQXJGLEtBQUksSUFBWXVGLFFBQVFGLEVBQ3pCLE0scUVBQUMsRUFwQlcsRyw0ekRDQW1CLGlEQUUxQkcsR0FBa0IsYSxzUkFBQSxVLFFBQUEsRyxFQUFBLEUsa1pBTXZCLFdBQVl6RixHQUFXLE1BS2tDLE8sNEZBTGxDLFNBQ04sTUFBaEIsY0FBTUEsSUFBVSwrR0FDaEIsRUFBS21CLG9CQUNMLFlBQWEsRUFBS2pCLE1BQU1FLGNBQWMsVUFDdEMsWUFBcUIsYUFBV0EsY0FBYywwQkFDOUMsWUFBeUIsYUFBbUJrQixhQUFZLENBQ3pELENBNEJDLE8sRUE1QkEsRyxFQUFBLDhCQUVELFNBQWdCb0UsR0FLZnpGLEtBQUswRixhQUpnQixTQUFDbEYsR0FDckJBLEVBQUVxQixpQkFDRjRELEdBQ0QsRUFDaUNwRixLQUFLTCxNQUN0QyxHQUFBQSxLQUFJLElBQU9NLGlCQUFpQixTQUFVTixLQUFLMEYsYUFDNUMsR0FBQyxnQ0FFRCxXQUNDLEdBQUExRixLQUFJLElBQU9ZLG9CQUFvQixTQUFVWixLQUFLMEYsYUFDL0MsR0FBQyxzQkFFRCxTQUFTQyxHQUNKQSxHQUNILEdBQUEzRixLQUFJLElBQWVxQixZQUFjLGNBQ2pDLEdBQUFyQixLQUFJLElBQWVnQyxhQUFhLFlBQVksS0FFNUMsR0FBQWhDLEtBQUksSUFBZWlDLGdCQUFnQixZQUNuQyxHQUFBakMsS0FBSSxJQUFlcUIsWUFBYyxHQUFBckIsS0FBSSxJQUV2QyxHQUFDLHdCQUVELFdBQ0NBLEtBQUs0RixxQkFDTCxnREFDRCxNLHFFQUFDLEVBeENzQixDQUFTOUYsR0NGM0IrRixHQUFnQixDQUNyQjlCLGNBQWUsZUFDZkMscUJBQXNCLHVCQUN0Qlcsb0JBQXFCLCtCQUNyQlIsZ0JBQWlCLHlCQUNqQkMsV0FBWSx1QkFHUDBCLEdBQW9CNUYsU0FBU0MsY0FBYyx5QkFDM0M0RixHQUFtQjdGLFNBQVNDLGNBQWMsd0JBQzFDNkYsR0FBbUI5RixTQUFTQyxjQUFjLGdDQUUxQzhGLEdBQWMvRixTQUFTZ0csTUFBTSxZQUM3QkMsR0FBZWpHLFNBQVNnRyxNQUFNLGFBQzlCRSxHQUFxQmxHLFNBQVNnRyxNQUFNLG9CQUNwQ0csR0FBaUJuRyxTQUFTQyxjQUFjLGFBQ3hDbUcsR0FBbUJwRyxTQUFTQyxjQUFjLGVBQzFDb0csR0FBMEJyRyxTQUFTQyxjQUFjLHNCLDJzQkNJbkRxRyxHLHlJQUVKLElBQU1DLEdBQU0sSUN2QkgsV0FLUixXQUFZQyxJLDRGQUFNLHVGQUNqQixHQUFBMUcsS0FBSSxHQUFRMEcsRUFBS0MsS0FDakIsR0FBQTNHLEtBQUksR0FBWTBHLEVBQUtFLFFBQ3RCLEMsUUEwRkMsTyxFQTFGQSxHLEVBQUEsdUJBRUQsU0FBU0MsR0FDUixPQUFPQSxJQUFRQyxNQUFLLFNBQUFDLEdBQ25CLE9BQUlBLEVBQVNDLEdBQ0xELEVBQVNFLE9BRVZDLFFBQVFDLE9BQU8sSUFBSUMsTUFBTUwsRUFBU00sUUFDMUMsSUFDRUMsT0FBTSxTQUFBQyxHQUVOLE9BREFDLFFBQVFDLElBQUksOEJBQStCRixJQUNwQyxDQUNSLEdBQ0YsR0FBQyw2QkFFRCxXQUFrQixXQUNqQixPQUFPdkgsS0FBSytHLFVBQVMsV0FDcEIsT0FBT0YsTUFBTSxHQUFELFVBQUksRUFBSSxjQUFlLENBQUVELFFBQVMsS0FBSSxLQUNuRCxHQUNELEdBQUMsZ0NBRUQsV0FBcUIsV0FDcEIsT0FBTzVHLEtBQUsrRyxVQUFTLFdBQ3BCLE9BQU9GLE1BQU0sR0FBRCxVQUFJLEVBQUksaUJBQWtCLENBQUVELFFBQVMsS0FBSSxLQUN0RCxHQUNELEdBQUMsbUNBRUQsU0FBc0J6RixFQUFNdUcsR0FBTyxXQUNsQyxPQUFPMUgsS0FBSytHLFVBQVMsV0FDcEIsT0FBT0YsTUFBTSxHQUFELFVBQUksRUFBSSxpQkFBa0IsQ0FDckNjLE9BQVEsUUFDUmYsUUFBUyxLQUFJLElBQ2JnQixLQUFNQyxLQUFLQyxVQUFVLENBQ3BCM0csS0FBTUEsRUFDTnVHLE1BQU9BLEtBR1YsR0FDRCxHQUFDLHdCQUVELFlBQTJCLFdBQWR2RyxFQUFJLEVBQUpBLEtBQU1DLEVBQUksRUFBSkEsS0FDbEIsT0FBT3BCLEtBQUsrRyxVQUFTLFdBQ3BCLE9BQU9GLE1BQU0sR0FBRCxVQUFJLEVBQUksY0FBZSxDQUNsQ2MsT0FBUSxPQUNSZixRQUFTLEtBQUksSUFDYmdCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDcEIzRyxLQUFNQSxFQUNOQyxLQUFNQSxLQUdULEdBQ0QsR0FBQyx3QkFFRCxTQUFXMkIsR0FBSSxXQUNkLE9BQU8vQyxLQUFLK0csVUFBUyxXQUNwQixPQUFPRixNQUFNLEdBQUQsVUFBSSxFQUFJLHNCQUFlOUQsR0FBTSxDQUN4QzRFLE9BQVEsU0FDUmYsUUFBUyxLQUFJLEtBRWYsR0FDRCxHQUFDLHFCQUVELFNBQVE3RCxHQUFJLFdBQ1gsT0FBTy9DLEtBQUsrRyxVQUFTLFdBQ3BCLE9BQU9GLE1BQU0sR0FBRCxVQUFJLEVBQUksc0JBQWU5RCxFQUFFLFVBQVUsQ0FDOUM0RSxPQUFRLE1BQ1JmLFFBQVMsS0FBSSxLQUVmLEdBQ0QsR0FBQyx3QkFFRCxTQUFXN0QsR0FBSSxXQUNkLE9BQU8vQyxLQUFLK0csVUFBUyxXQUNwQixPQUFPRixNQUFNLEdBQUQsVUFBSSxFQUFJLHNCQUFlOUQsRUFBRSxVQUFVLENBQzlDNEUsT0FBUSxTQUNSZixRQUFTLEtBQUksS0FFZixHQUNELEdBQUMsMEJBRUQsU0FBYXhGLEdBQU0sV0FDbEIsT0FBT3BCLEtBQUsrRyxVQUFTLFdBQ3BCLE9BQU9GLE1BQU0sR0FBRCxVQUFJLEVBQUksd0JBQXlCLENBQzVDYyxPQUFRLFFBQ1JmLFFBQVMsS0FBSSxJQUNiZ0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNwQkMsT0FBUTNHLEtBR1gsR0FDRCxNLHFFQUFDLEVBbEdPLEdEdUJHLENESk8sQ0FDbEJ1RixJQUFLLDhDQUVMQyxRQUFTLENBQ1JvQixjQUFlLHVDQUNmLGVBQWdCLHNCQ0NaQyxHQUFXLElBQUlyRCxHQUFTLENBQUVDLGFBQWMsaUJBQWtCQyxvQkFBcUIsd0JBQXlCQyxlQUFnQixvQkFFeEhtRCxHQUFlLElBQUlqRCxHQUFRLENBQ2hDRSxTQUFVLFNBQUN1QixHQUNWd0IsR0FBYUMsY0FBY0MsR0FBVzFCLEdBQ3ZDLEdBQ0VMLElBRUhhLFFBQVFtQixJQUFJLENBQUM1QixHQUFJNkIscUJBQXNCN0IsR0FBSThCLG9CQUN6Q3pCLE1BQUssWUFBbUIsSSxJQUFBLEcsRUFBQSxFLDRDQUFBLEksa3hCQUFqQjBCLEVBQUksS0FBRUMsRUFBSyxLQUNkRCxJQUNIUCxHQUFTUyxZQUFZRixFQUFLckgsS0FBTXFILEVBQUtkLE9BQ3JDTyxHQUFTVSxjQUFjSCxFQUFLVCxRQUM1QnZCLEdBQVFnQyxFQUFLNUYsS0FFVjZGLEdBQ0hQLEdBQWFVLFlBQVlILEVBRTNCLElBQ0NuQixPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUQsTUFBTUEsRUFBTSxJQUVyQyxJQUFNc0IsR0FBbUIsSUFBSXJELEdBQW1CLDhCQUMxQ3NELEdBQW1CLFNBQUNDLEdBQ3pCRixHQUFpQkcsWUFDakJILEdBQWlCSSxpQkFBZ0IsV0FFaEMsT0FEQUosR0FBaUJLLFVBQVMsR0FDbkJ6QyxHQUFJMEMsV0FBV0osRUFBS2hHLElBQ3pCK0QsTUFBSyxTQUFDc0MsR0FDRkEsSUFDSEwsRUFBS00sYUFDTFIsR0FBaUJ0SSxhQUNqQitJLFlBQVcsV0FDVlQsR0FBaUJLLFVBQVMsRUFDM0IsR0FBRyxLQUVMLElBQ0M1QixPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUMsSUFBSSw0QkFBNkJGLEVBQU0sR0FDakUsR0FDRCxFQVdNZ0MsR0FBaUIsU0FBQ0MsRUFBT3pHLEVBQUlTLElBVGhCLFNBQUNxRCxFQUFPckQsR0FDMUJxRCxFQUFNQyxNQUFLLFNBQUFKLEdBQ05BLEdBQ0hsRCxFQUFRa0QsRUFBSy9ELE1BQU1RLE9BRXJCLElBQ0VtRSxPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUMsSUFBSSw0QkFBNkJGLEVBQU0sR0FDakUsQ0FJRWtDLENBREdELEVBQ1EvQyxHQUFJaUQsV0FBVzNHLEdBRWYwRCxHQUFJakQsUUFBUVQsR0FGUVMsRUFJakMsRUFFTW1HLEdBQTBCLElBQUkxSSxFQUU5QnNCLEdBQWtCLFNBQUNwQixFQUFNQyxHQUFJLE9BQUt1SSxHQUF3QlgsVUFBVTdILEVBQU1DLEVBQUssRUFDL0VnSCxHQUFhLFNBQUMxQixHQUVuQixPQURBQSxFQUFLNUQsS0FBTzBELEdBQ0wsSUFBSWxFLEdBQUtDLEdENUVJLFdDNEUyQnVHLEdBQWtCUyxHQUFnQjdDLEdBQy9Fa0QsUUFDSCxFQUVNQyxHQUFtQixJQUFJckksRUFBYyx3QkFBd0IsU0FBQ2tGLEdBRW5FLE9BREFtRCxHQUFpQkMsU0FBUSxHQUNsQnJELEdBQUkyQixXQUFXMUIsR0FDcEJJLE1BQUssU0FBQ2lELEdBQ0ZBLElBQ0g3QixHQUFhOEIsUUFBUTVCLEdBQVcyQixJQUNoQ0YsR0FBaUJ0SixjQUVsQitJLFlBQVcsV0FDVk8sR0FBaUJDLFNBQVEsRUFDMUIsR0FBRyxJQUNKLElBQ0N4QyxPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUMsSUFBSSw0QkFBNkJGLEVBQU0sR0FDakUsSUFFQXhCLEdBQWlCekYsaUJBQWlCLFNBQVMsV0FDMUMySixHQUFxQkMsa0JBQ3JCTCxHQUFpQmIsV0FDbEIsSUFFQSxJQUFNbUIsR0FBdUIsSUFBSTNJLEVBQWMsNEJBQTRCLFlBQTJCLElBQXhCTCxFQUFJLEVBQUpBLEtBQU02RCxFQUFXLEVBQVhBLFlBRW5GLE9BREFtRixHQUFxQkwsU0FBUSxHQUN0QnJELEdBQUkyRCxzQkFBc0JqSixFQUFNNkQsR0FDckM4QixNQUFLLFNBQUNzQyxHQUNGQSxJQUNIbkIsR0FBU1MsWUFBWXZILEVBQU02RCxHQUMzQm1GLEdBQXFCNUosY0FFdEIrSSxZQUFXLFdBQ1ZhLEdBQXFCTCxTQUFRLEVBQzlCLEdBQUcsSUFDSixJQUNDeEMsT0FBTSxTQUFBQyxHQUFLLE9BQUlDLFFBQVFDLElBQUksd0NBQXlDRixFQUFNLEdBQzdFLElBRU04QyxHQUFzQixJQUFJN0ksRUFBYywyQkFBMkIsWUFBYyxJQUFYSixFQUFJLEVBQUpBLEtBRTNFLE9BREFpSixHQUFvQlAsU0FBUSxHQUNyQnJELEdBQUk2RCxhQUFhbEosR0FDdEIwRixNQUFLLFNBQUNzQyxHQUNGQSxJQUNIbkIsR0FBU1UsY0FBY3ZILEdBQ3ZCaUosR0FBb0I5SixjQUVyQitJLFlBQVcsV0FDVmUsR0FBb0JQLFNBQVEsRUFDN0IsR0FBRyxJQUNKLElBQ0N4QyxPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUMsSUFBSSw4QkFBK0JGLEVBQU0sR0FDbkUsSUFFQXZCLEdBQWlCMUYsaUJBQWlCLFNBQVMsV0FDMUMrSixHQUFvQnJCLFlBQ3BCdUIsR0FBNEJMLGlCQUM3QixJQUVBcEUsR0FBa0J4RixpQkFBaUIsU0FBUyxXQUFNLE1BQytCMkgsR0FBU3VDLGNBQWhGbEUsR0FBaUJqRSxNQUFLLEVBQTVCbEIsS0FBMkNvRixHQUF3QmxFLE1BQUssRUFBMUMyQyxZQUNqQ21GLEdBQXFCbkIsWUFDckJ5QixHQUFzQlAsaUJBQ3ZCLElBRUEsSUFBTUQsR0FBdUIsSUFBSXJHLEdBQWNpQyxHQUFlSSxJQUN4RHdFLEdBQXdCLElBQUk3RyxHQUFjaUMsR0FBZU0sSUFDekRvRSxHQUE4QixJQUFJM0csR0FBY2lDLEdBQWVPLElBQ3JFNkQsR0FBcUJTLG1CQUNyQkQsR0FBc0JDLG1CQUN0QkgsR0FBNEJHLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2RhdGEuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUG9wdXAge1xyXG5cclxuXHRwb3B1cDtcclxuXHRoYW5kbGVDbG9zZVBvcHVwUHJlc3NFc2M7XHJcblx0I2J1dHRvbkNsb3NlO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG5cdFx0dGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG5cdFx0dGhpcy4jYnV0dG9uQ2xvc2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcblx0XHR0aGlzLmhhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYyA9IHRoaXMuI2hhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYy5iaW5kKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0YWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLiNidXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2VQb3B1cCgpKTtcclxuXHRcdHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy4jaGFuZGxlQ2xvc2VQb3B1cENsaWNrT3ZlcmxheShlKSk7XHJcblx0fVxyXG5cclxuXHQjaGFuZGxlQ2xvc2VQb3B1cENsaWNrT3ZlcmxheShldmVudCkge1xyXG5cdFx0aWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcblx0XHRcdHRoaXMuY2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0I2hhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYyhldmVudCkge1xyXG5cdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvcGVuUG9wdXAoKSB7XHJcblx0XHR0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjKTtcclxuXHR9XHJcblxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblx0XHR0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG5cclxuXHQjaW1hZ2U7XHJcblx0I25hbWU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0c3VwZXIoJy5wb3B1cF90eXBlX3ByZXZpZXctcGljdHVyZScpO1xyXG5cdFx0dGhpcy4jaW1hZ2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuXHRcdHRoaXMuI25hbWUgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbmFtZScpO1xyXG5cdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0b3BlblBvcHVwKG5hbWUsIGxpbmspIHtcclxuXHRcdHRoaXMuI25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cdFx0dGhpcy4jaW1hZ2Uuc3JjID0gbGluaztcclxuXHRcdHRoaXMuI2ltYWdlLmFsdCA9IG5hbWU7XHJcblx0XHRzdXBlci5vcGVuUG9wdXAoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuXHJcblx0I2hhbmRsZVN1Ym1pdDtcclxuXHQjZm9ybTtcclxuXHQjZm9ybUlucHV0cztcclxuXHQjc3VibWl0YnV0dG9uO1xyXG5cdCNzdWJtaXRCdXR0b25UZXh0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcblx0XHRzdXBlcihzZWxlY3Rvcik7XHJcblx0XHR0aGlzLiNoYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcblx0XHR0aGlzLiNmb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5cdFx0dGhpcy4jZm9ybUlucHV0cyA9IEFycmF5LmZyb20odGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSk7XHJcblx0XHR0aGlzLiNzdWJtaXRidXR0b24gPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQtYnV0dG9uJyk7XHJcblx0XHR0aGlzLiNzdWJtaXRCdXR0b25UZXh0ID0gdGhpcy4jc3VibWl0YnV0dG9uLnRleHRDb250ZW50O1xyXG5cdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0I2dldElucHV0VmFsdWVzKCkge1xyXG5cdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHRcdHRoaXMuI2Zvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuXHRcdHJldHVybiBpbnB1dFZhbHVlcztcclxuXHR9XHJcblxyXG5cdGFkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0c3VwZXIuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLiNoYW5kbGVTdWJtaXQodGhpcy4jZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblx0XHRzdXBlci5jbG9zZVBvcHVwKCk7XHJcblx0XHR0aGlzLiNmb3JtLnJlc2V0KCk7XHJcblx0fVxyXG5cclxuXHRsb2FkaW5nKGlzTG9hZGluZykge1xyXG5cdFx0aWYgKGlzTG9hZGluZykge1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy4jc3VibWl0YnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuXHRcdFx0dGhpcy4jc3VibWl0YnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy4jc3VibWl0QnV0dG9uVGV4dDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEZvcm0gfTsiLCJjbGFzcyBDYXJkIHtcclxuXHJcblx0I215SUQ7XHJcblxyXG5cdCNvcGVuQ2FyZFByZXZpZXc7XHJcblx0I2hhbmRsZURlbGV0ZTtcclxuXHQjaGFuZGxlTGlrZTtcclxuXHQjYnV0dG9uTGlrZTtcclxuXHQjbmFtZTtcclxuXHQjbGluaztcclxuXHQjb3duZXI7XHJcblx0I2VsZW1lbnQ7XHJcblx0I2VsZW1lbnRJbWFnZTtcclxuXHQjbGlrZXM7XHJcblx0I2J1dHRvbkRlbGV0ZTtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKG9wZW5DYXJkUHJldmlldywgdGVtcGxhdGUsIGhhbmRsZURlbGV0ZSwgaGFuZGxlTGlrZSwgeyBsaWtlcywgX2lkLCBuYW1lLCBsaW5rLCBvd25lciwgbXlJRCB9KSB7XHJcblx0XHR0aGlzLiNvcGVuQ2FyZFByZXZpZXcgPSBvcGVuQ2FyZFByZXZpZXc7XHJcblx0XHR0aGlzLiNoYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcblx0XHR0aGlzLiNoYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcclxuXHRcdHRoaXMuI25hbWUgPSBuYW1lO1xyXG5cdFx0dGhpcy4jbGluayA9IGxpbms7XHJcblx0XHR0aGlzLmlkID0gX2lkO1xyXG5cdFx0dGhpcy4jbXlJRCA9IG15SUQ7XHJcblx0XHR0aGlzLiNvd25lciA9IG93bmVyO1xyXG5cdFx0dGhpcy4jZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGUpLmNvbnRlbnRcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JykuY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0dGhpcy4jZWxlbWVudEltYWdlID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcclxuXHRcdHRoaXMuI2J1dHRvbkxpa2UgPSB0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tbGlrZScpO1xyXG5cdFx0dGhpcy4jYnV0dG9uRGVsZXRlID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uLXRyYXNoJyk7XHJcblx0XHR0aGlzLiNsaWtlcyA9IGxpa2VzO1xyXG5cdFx0dGhpcy5saWtlQ291bnQgPSB0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50Jyk7XHJcblx0XHR0aGlzLmxpa2VDb3VudC50ZXh0Q29udGVudCA9IGxpa2VzLmxlbmd0aDtcclxuXHRcdHRoaXMuaXNMaWtlZCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0I2FkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0dGhpcy4jZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy4jb3BlbkNhcmRQcmV2aWV3KHRoaXMuI25hbWUsIHRoaXMuI2xpbmspKTtcclxuXHRcdHRoaXMuI2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuI2hhbmRsZUxpa2UodGhpcy5pc0xpa2VkLCB0aGlzLmlkLCB0aGlzLnNldExpa2UuYmluZCh0aGlzKSk7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLiNvd25lci5faWQgPT0gdGhpcy4jbXlJRCkge1xyXG5cdFx0XHR0aGlzLiNidXR0b25EZWxldGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0XHRcdHRoaXMuI2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuI2hhbmRsZURlbGV0ZUNhcmQoKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXRMaWtlKGNvdW50KSB7XHJcblx0XHR0aGlzLmxpa2VDb3VudC50ZXh0Q29udGVudCA9IGNvdW50O1xyXG5cdFx0dGhpcy4jdG9nZ2xlTGlrZSgpO1xyXG5cdH1cclxuXHJcblx0I2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcblx0XHR0aGlzLiNoYW5kbGVEZWxldGUodGhpcyk7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVDYXJkKCkge1xyXG5cdFx0dGhpcy4jZWxlbWVudC5yZW1vdmUoKTtcclxuXHRcdHRoaXMuI2VsZW1lbnQgPSBudWxsO1xyXG5cdH1cclxuXHJcblx0I3RvZ2dsZUxpa2UoKSB7XHJcblx0XHR0aGlzLmlzTGlrZWQgPSAhdGhpcy5pc0xpa2VkO1xyXG5cdFx0dGhpcy4jYnV0dG9uTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19idXR0b24tbGlrZV9hY3RpdmUnKTtcclxuXHR9XHJcblxyXG5cdGhhdmVNeUxpa2UoKSB7XHJcblx0XHR0aGlzLiNsaWtlcy5mb3JFYWNoKGxpa2UgPT4ge1xyXG5cdFx0XHRpZiAobGlrZS5faWQgPT0gdGhpcy4jbXlJRCkge1xyXG5cdFx0XHRcdHRoaXMuI3RvZ2dsZUxpa2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRjcmVhdGUoKSB7XHJcblx0XHR0aGlzLiNlbGVtZW50SW1hZ2Uuc3JjID0gdGhpcy4jbGluaztcclxuXHRcdHRoaXMuI2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLiNuYW1lO1xyXG5cdFx0dGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy4jbmFtZTtcclxuXHRcdHRoaXMuI2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLmhhdmVNeUxpa2UoKTtcclxuXHRcdHJldHVybiB0aGlzLiNlbGVtZW50O1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9OyIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG5cclxuXHQjc2V0dGluZ3M7XHJcblx0I2Zvcm07XHJcblx0I2lucHV0TGlzdDtcclxuXHQjYnV0dG9uU3VibWl0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybVNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLiNzZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy4jZm9ybSA9IGZvcm1TZWxlY3RvcjtcclxuXHRcdHRoaXMuI2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuI3NldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcclxuXHRcdHRoaXMuI2J1dHRvblN1Ym1pdCA9IHRoaXMuI2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLiNzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHQjc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yTWVzc2FnZSkge1xyXG5cdFx0Y29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuXHRcdGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy4jc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuXHRcdGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuI3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG5cdH1cclxuXHJcblx0I2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG5cdFx0aW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcblx0XHRlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuXHR9XHJcblxyXG5cdCNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuXHRcdGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuXHRcdFx0dGhpcy4jc2hvd0lucHV0RXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuI2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCNoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcblx0XHRyZXR1cm4gaW5wdXRMaXN0LnNvbWUoaW5wdXQgPT4ge1xyXG5cdFx0XHRyZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQjZW5hYmxlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCkge1xyXG5cdFx0YnV0dG9uU3VibWl0LmNsYXNzTGlzdC5hZGQodGhpcy4jc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblx0XHRidXR0b25TdWJtaXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdH1cclxuXHJcblx0I2Rpc2FibGVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0KSB7XHJcblx0XHRidXR0b25TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHRcdGJ1dHRvblN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblx0fVxyXG5cclxuXHQjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLiNpbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuXHRcdFx0dGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuXHRcdFx0aWYgKHRoaXMuI2hhc0ludmFsaWRJbnB1dCh0aGlzLiNpbnB1dExpc3QpKSB7XHJcblx0XHRcdFx0dGhpcy4jZW5hYmxlU3VibWl0QnV0dG9uKHRoaXMuI2J1dHRvblN1Ym1pdCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy4jZGlzYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLiNidXR0b25TdWJtaXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblx0fVxyXG5cclxuXHRyZXNldEZvcm1FcnJvcnMoKSB7XHJcblx0XHR0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuXHRcdFx0dGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuXHRcdFx0dGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAodGhpcy4jaGFzSW52YWxpZElucHV0KHRoaXMuI2lucHV0TGlzdCkpIHtcclxuXHRcdFx0dGhpcy4jZW5hYmxlU3VibWl0QnV0dG9uKHRoaXMuI2J1dHRvblN1Ym1pdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLiNkaXNhYmxlU3VibWl0QnV0dG9uKHRoaXMuI2J1dHRvblN1Ym1pdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRlbmFibGVWYWxpZGF0aW9uKCkge1xyXG5cdFx0dGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgfTsiLCJjbGFzcyBVc2VySW5mbyB7XHJcblxyXG5cdCN1c2VyTmFtZTtcclxuXHQjdXNlckRlc2NyaXB0aW9uO1xyXG5cdCN1c2VyQXZhdGFyO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG5cdFx0dGhpcy4jdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcblx0XHR0aGlzLiN1c2VyRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy4jdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG5cdH1cclxuXHJcblx0Z2V0VXNlckluZm8oKSB7XHJcblx0XHRyZXR1cm4geyBuYW1lOiB0aGlzLiN1c2VyTmFtZS50ZXh0Q29udGVudCwgZGVzY3JpcHRpb246IHRoaXMuI3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCB9O1xyXG5cdH1cclxuXHJcblx0c2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuXHRcdHRoaXMuI3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHRcdHRoaXMuI3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG5cdH1cclxuXHJcblx0c2V0VXNlckF2YXRhcihsaW5rKSB7XHJcblx0XHR0aGlzLiN1c2VyQXZhdGFyLnNyYyA9IGxpbms7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBVc2VySW5mbyB9OyIsImNsYXNzIFNlY3Rpb24ge1xyXG5cclxuXHQjcmVuZGVyZXI7XHJcblx0I2NvbnRhaW5lcjtcclxuXHJcblx0Y29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG5cdFx0dGhpcy4jcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHRcdHRoaXMuI2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG5cdH1cclxuXHJcblx0cmVuZGVySXRlbXMoaXRlbXMpIHtcclxuXHRcdGl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLiNyZW5kZXJlcihpdGVtKSk7XHJcblx0fVxyXG5cclxuXHRhZGRTZXJ2ZXJJdGVtKGl0ZW0pIHtcclxuXHRcdHRoaXMuI2NvbnRhaW5lci5hcHBlbmQoaXRlbSk7XHJcblx0fVxyXG5cclxuXHRhZGRJdGVtKGl0ZW0pIHtcclxuXHRcdHRoaXMuI2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2VjdGlvbiB9OyIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmNsYXNzIFBvcHVwQ29uZmlybURlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuXHJcblx0I2Zvcm07XHJcblx0I3N1Ym1pdGJ1dHRvbjtcclxuXHQjc3VibWl0QnV0dG9uVGV4dFxyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3RvciwpIHtcclxuXHRcdHN1cGVyKHNlbGVjdG9yKTtcclxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuI2Zvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcblx0XHR0aGlzLiNzdWJtaXRidXR0b24gPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19jb25maXJtLWJ1dHRvbicpO1xyXG5cdFx0dGhpcy4jc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuI3N1Ym1pdGJ1dHRvbi50ZXh0Q29udGVudDtcclxuXHR9XHJcblxyXG5cdHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuXHRcdGNvbnN0IHN1Ym1pdEFjdGlvbiA9IChlKSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0YWN0aW9uKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnN1Ym1pdEFjdGlvbiA9IHN1Ym1pdEFjdGlvbi5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEFjdGlvbik7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVTdWJtaXRBY3Rpb24oKSB7XHJcblx0XHR0aGlzLiNmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0QWN0aW9uKTtcclxuXHR9XHJcblxyXG5cdGRlbGV0aW5nKGlzRGVsZXRpbmcpIHtcclxuXHRcdGlmIChpc0RlbGV0aW5nKSB7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQo9C00LDQu9C10L3QuNC1Li4uJztcclxuXHRcdFx0dGhpcy4jc3VibWl0YnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuI3N1Ym1pdEJ1dHRvblRleHQ7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjbG9zZVBvcHVwKCkge1xyXG5cdFx0dGhpcy5yZW1vdmVTdWJtaXRBY3Rpb24oKTtcclxuXHRcdHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwQ29uZmlybURlbGV0ZSB9OyIsImNvbnN0IHZhbGlkYXRpb25TZXQgPSB7XHJcblx0aW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcblx0c3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ1dHRvbicsXHJcblx0aW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG5cdGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG5cdGVycm9yQ2xhc3M6ICdmb3JtX19lcnJvcl92aXNpYmxlJ1xyXG59XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhci1idXR0b24nKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gJyNlbGVtZW50JztcclxuY29uc3QgZm9ybVR5cGVBZGQgPSBkb2N1bWVudC5mb3Jtc1snYWRkLWZvcm0nXTtcclxuY29uc3QgZm9ybVR5cGVFZGl0ID0gZG9jdW1lbnQuZm9ybXNbJ2VkaXQtZm9ybSddO1xyXG5jb25zdCBmb3JtVHlwZUVkaXRBdmF0YXIgPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1hdmF0YXItZm9ybSddO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUtaW5wdXQnKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24taW5wdXQnKTtcclxuXHJcbmNvbnN0IEFQSV9DT05GSUcgPSB7XHJcblx0dXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01MicsXHJcblxyXG5cdGhlYWRlcnM6IHtcclxuXHRcdGF1dGhvcml6YXRpb246ICdlZDA2OGEyZi1jMTE3LTQyYTUtYTIzMi0xZTBkYjY2MTEwYmUnLFxyXG5cdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHR9LFxyXG59XHJcblxyXG5leHBvcnQge1xyXG5cdHZhbGlkYXRpb25TZXQsIHByb2ZpbGVFZGl0QnV0dG9uLCBwcm9maWxlQWRkQnV0dG9uLCBjYXJkVGVtcGxhdGUsXHJcblx0Zm9ybVR5cGVBZGQsIGZvcm1UeXBlRWRpdCwgY2FyZHNDb250YWluZXIsIHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG5cdGF2YXRhckVkaXRCdXR0b24sIGZvcm1UeXBlRWRpdEF2YXRhciwgQVBJX0NPTkZJR1xyXG59OyIsImltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm1EZWxldGUgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybURlbGV0ZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG5cdHZhbGlkYXRpb25TZXQsIHByb2ZpbGVBZGRCdXR0b24sIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG5cdGNhcmRUZW1wbGF0ZSwgZm9ybVR5cGVBZGQsIGZvcm1UeXBlRWRpdCwgY2FyZHNDb250YWluZXIsXHJcblx0cHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsIHByb2ZpbGVOYW1lSW5wdXQsXHJcblx0YXZhdGFyRWRpdEJ1dHRvbiwgZm9ybVR5cGVFZGl0QXZhdGFyLCBBUElfQ09ORklHXHJcbn1cclxuXHRmcm9tICcuLi91dGlscy9kYXRhLmpzJztcclxuXHJcbi8v0YHRgtC40LvQuCBieSB3ZWJwYWNrXHJcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcclxuXHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmxldCBNWV9JRDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoQVBJX0NPTkZJRyk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJywgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX3Bob3RvJyB9KTtcclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuXHRyZW5kZXJlcjogKGRhdGEpID0+IHtcclxuXHRcdGNhcmRzU2VjdGlvbi5hZGRTZXJ2ZXJJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xyXG5cdH1cclxufSwgY2FyZHNDb250YWluZXIpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mb3JtYXRpb24oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuXHQudGhlbigoW3VzZXIsIGNhcmRzXSkgPT4ge1xyXG5cdFx0aWYgKHVzZXIpIHtcclxuXHRcdFx0dXNlckluZm8uc2V0VXNlckluZm8odXNlci5uYW1lLCB1c2VyLmFib3V0KTtcclxuXHRcdFx0dXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyLmF2YXRhcik7XHJcblx0XHRcdE1ZX0lEID0gdXNlci5faWQ7XHJcblx0XHR9XHJcblx0XHRpZiAoY2FyZHMpIHtcclxuXHRcdFx0Y2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcclxuXHRcdH1cclxuXHR9KVxyXG5cdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XHJcblxyXG5jb25zdCBwb3B1cFR5cGVDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybURlbGV0ZSgnLnBvcHVwX3R5cGVfY29uZmlybS1kZWxldGUnKTtcclxuY29uc3QgaGFuZGxlRGVsZXRlQ2FyZCA9IChjYXJkKSA9PiB7XHJcblx0cG9wdXBUeXBlQ29uZmlybS5vcGVuUG9wdXAoKTtcclxuXHRwb3B1cFR5cGVDb25maXJtLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcblx0XHRwb3B1cFR5cGVDb25maXJtLmRlbGV0aW5nKHRydWUpO1xyXG5cdFx0cmV0dXJuIGFwaS5kZWxldGVDYXJkKGNhcmQuaWQpXHJcblx0XHRcdC50aGVuKChyZXF1ZXN0U3RhdHVzKSA9PiB7XHJcblx0XHRcdFx0aWYgKHJlcXVlc3RTdGF0dXMpIHtcclxuXHRcdFx0XHRcdGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG5cdFx0XHRcdFx0cG9wdXBUeXBlQ29uZmlybS5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0cG9wdXBUeXBlQ29uZmlybS5kZWxldGluZyhmYWxzZSk7XHJcblx0XHRcdFx0XHR9LCA1MDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSBkZWxldGluZyBjYXJkJywgZXJyb3IpKVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2hhbmdlTGlrZSA9IChmZXRjaCwgc2V0TGlrZSkgPT4ge1xyXG5cdGZldGNoLnRoZW4oZGF0YSA9PiB7XHJcblx0XHRpZiAoZGF0YSkge1xyXG5cdFx0XHRzZXRMaWtlKGRhdGEubGlrZXMubGVuZ3RoKVxyXG5cdFx0fVxyXG5cdH0pXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHRvZ2dsaW5nIGxpa2UnLCBlcnJvcikpO1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVMaWtlQ2FyZCA9IChsaWtlZCwgaWQsIHNldExpa2UpID0+IHtcclxuXHRpZiAobGlrZWQpIHtcclxuXHRcdGNoYW5nZUxpa2UoYXBpLnJlbW92ZUxpa2UoaWQpLCBzZXRMaWtlKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y2hhbmdlTGlrZShhcGkuc2V0TGlrZShpZCksIHNldExpa2UpO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcG9wdXBUeXBlUHJldmlld1BpY3R1cmUgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoKTtcclxuXHJcbmNvbnN0IG9wZW5DYXJkUHJldmlldyA9IChuYW1lLCBsaW5rKSA9PiBwb3B1cFR5cGVQcmV2aWV3UGljdHVyZS5vcGVuUG9wdXAobmFtZSwgbGluayk7XHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG5cdGRhdGEubXlJRCA9IE1ZX0lEO1xyXG5cdHJldHVybiBuZXcgQ2FyZChvcGVuQ2FyZFByZXZpZXcsIGNhcmRUZW1wbGF0ZSwgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlTGlrZUNhcmQsIGRhdGEpXHJcblx0XHQuY3JlYXRlKCk7XHJcbn07XHJcblxyXG5jb25zdCBwb3B1cFR5cGVBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZC1jYXJkJywgKGRhdGEpID0+IHtcclxuXHRwb3B1cFR5cGVBZGRDYXJkLmxvYWRpbmcodHJ1ZSk7XHJcblx0cmV0dXJuIGFwaS5jcmVhdGVDYXJkKGRhdGEpXHJcblx0XHQudGhlbigobmV3RGF0YSkgPT4ge1xyXG5cdFx0XHRpZiAobmV3RGF0YSkge1xyXG5cdFx0XHRcdGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmV3RGF0YSkpO1xyXG5cdFx0XHRcdHBvcHVwVHlwZUFkZENhcmQuY2xvc2VQb3B1cCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHBvcHVwVHlwZUFkZENhcmQubG9hZGluZyhmYWxzZSk7XHJcblx0XHRcdH0sIDUwMCk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSBjcmVhdGluZyBjYXJkJywgZXJyb3IpKTtcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdHZhbGlkYXRvckZvcm1UeXBlQWRkLnJlc2V0Rm9ybUVycm9ycygpO1xyXG5cdHBvcHVwVHlwZUFkZENhcmQub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBUeXBlRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJywgKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkgPT4ge1xyXG5cdHBvcHVwVHlwZUVkaXRQcm9maWxlLmxvYWRpbmcodHJ1ZSk7XHJcblx0cmV0dXJuIGFwaS51cGRhdGVVc2VySW5mb3JtYXRpb24obmFtZSwgZGVzY3JpcHRpb24pXHJcblx0XHQudGhlbigocmVxdWVzdFN0YXR1cykgPT4ge1xyXG5cdFx0XHRpZiAocmVxdWVzdFN0YXR1cykge1xyXG5cdFx0XHRcdHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuXHRcdFx0XHRwb3B1cFR5cGVFZGl0UHJvZmlsZS5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0cG9wdXBUeXBlRWRpdFByb2ZpbGUubG9hZGluZyhmYWxzZSk7XHJcblx0XHRcdH0sIDUwMCk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSB1cGRhdGluZyB1c2VyIGluZm9ybWF0aW9uJywgZXJyb3IpKTtcclxufSlcclxuXHJcbmNvbnN0IHBvcHVwVHlwZUVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXInLCAoeyBsaW5rIH0pID0+IHtcclxuXHRwb3B1cFR5cGVFZGl0QXZhdGFyLmxvYWRpbmcodHJ1ZSk7XHJcblx0cmV0dXJuIGFwaS51cGRhdGVBdmF0YXIobGluaylcclxuXHRcdC50aGVuKChyZXF1ZXN0U3RhdHVzKSA9PiB7XHJcblx0XHRcdGlmIChyZXF1ZXN0U3RhdHVzKSB7XHJcblx0XHRcdFx0dXNlckluZm8uc2V0VXNlckF2YXRhcihsaW5rKTtcclxuXHRcdFx0XHRwb3B1cFR5cGVFZGl0QXZhdGFyLmNsb3NlUG9wdXAoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRwb3B1cFR5cGVFZGl0QXZhdGFyLmxvYWRpbmcoZmFsc2UpO1xyXG5cdFx0XHR9LCA1MDApO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgdXBkYXRpbmcgYXZhdGFyJywgZXJyb3IpKTtcclxufSlcclxuXHJcbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cG9wdXBUeXBlRWRpdEF2YXRhci5vcGVuUG9wdXAoKTtcclxuXHR2YWxpZGF0b3JGb3JtVHlwZUVkaXRBdmF0YXIucmVzZXRGb3JtRXJyb3JzKCk7XHJcbn0pXHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHQoeyBuYW1lOiBwcm9maWxlTmFtZUlucHV0LnZhbHVlLCBkZXNjcmlwdGlvbjogcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG5cdHBvcHVwVHlwZUVkaXRQcm9maWxlLm9wZW5Qb3B1cCgpO1xyXG5cdHZhbGlkYXRvckZvcm1UeXBlRWRpdC5yZXNldEZvcm1FcnJvcnMoKTtcclxufSk7XHJcblxyXG5jb25zdCB2YWxpZGF0b3JGb3JtVHlwZUFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXQsIGZvcm1UeXBlQWRkKTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybVR5cGVFZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldCwgZm9ybVR5cGVFZGl0KTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybVR5cGVFZGl0QXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldCwgZm9ybVR5cGVFZGl0QXZhdGFyKTtcclxudmFsaWRhdG9yRm9ybVR5cGVBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JGb3JtVHlwZUVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JGb3JtVHlwZUVkaXRBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuXHJcbiIsImNsYXNzIEFwaSB7XHJcblxyXG5cdCN1cmw7XHJcblx0I2hlYWRlcnM7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuXHRcdHRoaXMuI3VybCA9IGRhdGEudXJsO1xyXG5cdFx0dGhpcy4jaGVhZGVycyA9IGRhdGEuaGVhZGVycztcclxuXHR9XHJcblxyXG5cdHJlc3BvbnNlKGZldGNoKSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goKS50aGVuKHJlc3BvbnNlID0+IHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlLm9rKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cykpO1xyXG5cdFx0fSlcclxuXHRcdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgc2VuZGluZyByZXF1ZXN0JywgZXJyb3IpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRJbml0aWFsQ2FyZHMoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzIH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzIH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVVc2VySW5mb3JtYXRpb24obmFtZSwgYWJvdXQpIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vdXNlcnMvbWVgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnUEFUQ0gnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFx0bmFtZTogbmFtZSxcclxuXHRcdFx0XHRcdGFib3V0OiBhYm91dFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vY2FyZHNgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRcdFx0bGluazogbGlua1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGRlbGV0ZUNhcmQoaWQpIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZXRMaWtlKGlkKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlTGlrZShpZCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZUF2YXRhcihsaW5rKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdQQVRDSCcsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRhdmF0YXI6IGxpbmssXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEFwaSB9OyJdLCJuYW1lcyI6WyJQb3B1cCIsInNlbGVjdG9yIiwidGhpcyIsInBvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZVBvcHVwIiwiZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5IiwiUG9wdXBXaXRoSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVycyIsIm5hbWUiLCJsaW5rIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJpc0xvYWRpbmciLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dFZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiQ2FyZCIsIm9wZW5DYXJkUHJldmlldyIsInRlbXBsYXRlIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsImxpa2VzIiwiX2lkIiwib3duZXIiLCJteUlEIiwiaWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibGlrZUNvdW50IiwibGVuZ3RoIiwiaXNMaWtlZCIsImNvdW50IiwibGlrZSIsImhhdmVNeUxpa2UiLCJzZXRMaWtlIiwic3R5bGUiLCJkaXNwbGF5IiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25TdWJtaXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJkZXNjcmlwdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiaXRlbXMiLCJpdGVtIiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwQ29uZmlybURlbGV0ZSIsImFjdGlvbiIsInN1Ym1pdEFjdGlvbiIsImlzRGVsZXRpbmciLCJyZW1vdmVTdWJtaXRBY3Rpb24iLCJ2YWxpZGF0aW9uU2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImZvcm1UeXBlQWRkIiwiZm9ybXMiLCJmb3JtVHlwZUVkaXQiLCJmb3JtVHlwZUVkaXRBdmF0YXIiLCJjYXJkc0NvbnRhaW5lciIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsIk1ZX0lEIiwiYXBpIiwiZGF0YSIsInVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsImNhcmRzU2VjdGlvbiIsImFkZFNlcnZlckl0ZW0iLCJjcmVhdGVDYXJkIiwiYWxsIiwiZ2V0VXNlckluZm9ybWF0aW9uIiwiZ2V0SW5pdGlhbENhcmRzIiwidXNlciIsImNhcmRzIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwicmVuZGVySXRlbXMiLCJwb3B1cFR5cGVDb25maXJtIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmQiLCJvcGVuUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGluZyIsImRlbGV0ZUNhcmQiLCJyZXF1ZXN0U3RhdHVzIiwicmVtb3ZlQ2FyZCIsInNldFRpbWVvdXQiLCJoYW5kbGVMaWtlQ2FyZCIsImxpa2VkIiwiY2hhbmdlTGlrZSIsInJlbW92ZUxpa2UiLCJwb3B1cFR5cGVQcmV2aWV3UGljdHVyZSIsImNyZWF0ZSIsInBvcHVwVHlwZUFkZENhcmQiLCJsb2FkaW5nIiwibmV3RGF0YSIsImFkZEl0ZW0iLCJ2YWxpZGF0b3JGb3JtVHlwZUFkZCIsInJlc2V0Rm9ybUVycm9ycyIsInBvcHVwVHlwZUVkaXRQcm9maWxlIiwidXBkYXRlVXNlckluZm9ybWF0aW9uIiwicG9wdXBUeXBlRWRpdEF2YXRhciIsInVwZGF0ZUF2YXRhciIsInZhbGlkYXRvckZvcm1UeXBlRWRpdEF2YXRhciIsImdldFVzZXJJbmZvIiwidmFsaWRhdG9yRm9ybVR5cGVFZGl0IiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=
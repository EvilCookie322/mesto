(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){n(e,t),t.add(e)}function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var a=new WeakMap,u=new WeakSet,c=new WeakSet,l=function(){function l(e){var s,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t(this,c),t(this,u),r(this,"popup",void 0),r(this,"handleClosePopupPressEsc",void 0),p={writable:!0,value:void 0},n(this,s=a),s.set(this,p),this.popup=document.querySelector(e),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,i(e,t,"set"),n)}(this,a,this.popup.querySelector(".popup__close-button")),this.handleClosePopupPressEsc=o(this,c,f).bind(this)}var p,h;return p=l,(h=[{key:"addEventListeners",value:function(){var e,t=this;(this,e=a,function(e,t){return t.get?t.get.call(e):t.value}(this,i(this,e,"get"))).addEventListener("click",(function(){return t.closePopup()})),this.popup.addEventListener("click",(function(e){return o(t,u,s).call(t,e)}))}},{key:"openPopup",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",this.handleClosePopupPressEsc)}},{key:"closePopup",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleClosePopupPressEsc)}}])&&e(p.prototype,h),Object.defineProperty(p,"prototype",{writable:!1}),l}();function s(e){e.target.classList.contains("popup_opened")&&this.closePopup()}function f(e){"Escape"===e.key&&this.closePopup()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function k(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_(e,t,"get"))}function E(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_(e,t,"set"),n),n}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var S=new WeakMap,P=new WeakMap,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),g(w(e=i.call(this,".popup_type_preview-picture")),S,{writable:!0,value:void 0}),g(w(e),P,{writable:!0,value:void 0}),E(w(e),S,e.popup.querySelector(".popup__image")),E(w(e),P,e.popup.querySelector(".popup__name")),e.addEventListeners(),e}return t=a,(n=[{key:"openPopup",value:function(e,t){k(this,P).textContent=e,k(this,S).src=t,k(this,S).alt=e,d(m(a.prototype),"openPopup",this).call(this)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=W(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function W(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function M(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function R(e,t,n){I(e,t),t.set(e,n)}function I(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var B=new WeakMap,z=new WeakMap,F=new WeakMap,N=new WeakMap,V=new WeakMap,J=new WeakSet,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e,t){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),I(r=q(n=i.call(this,e)),o=J),o.add(r),R(q(n),B,{writable:!0,value:void 0}),R(q(n),z,{writable:!0,value:void 0}),R(q(n),F,{writable:!0,value:void 0}),R(q(n),N,{writable:!0,value:void 0}),R(q(n),V,{writable:!0,value:void 0}),U(q(n),B,t),U(q(n),z,n.popup.querySelector(".form")),U(q(n),F,Array.from(x(q(n),z).querySelectorAll(".form__input"))),U(q(n),N,x(q(n),z).querySelector(".form__submit-button")),U(q(n),V,x(q(n),N).textContent),n.addEventListeners(),n}return t=a,(n=[{key:"addEventListeners",value:function(){var e=this;T(A(a.prototype),"addEventListeners",this).call(this),x(this,z).addEventListener("submit",(function(t){t.preventDefault(),x(e,B).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,J,$).call(e)).then((function(t){t&&e.closePopup()}))}))}},{key:"closePopup",value:function(){T(A(a.prototype),"closePopup",this).call(this),x(this,z).reset()}},{key:"loading",value:function(e){e?(x(this,N).textContent="Сохранение...",x(this,N).setAttribute("disabled",!0)):(x(this,N).removeAttribute("disabled"),x(this,N).textContent=x(this,V))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function $(){var e={};return x(this,F).forEach((function(t){return e[t.name]=t.value})),e}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){X(e,t),t.add(e)}function Q(e,t,n){X(e,t),t.set(e,n)}function X(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Y(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Z(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,te(e,t,"get"))}function ee(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,te(e,t,"set"),n),n}function te(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakMap,ae=new WeakMap,ue=new WeakMap,ce=new WeakMap,le=new WeakMap,se=new WeakMap,fe=new WeakMap,pe=new WeakMap,he=new WeakMap,de=new WeakSet,ve=new WeakSet,ye=new WeakSet,be=function(){function e(t,n,r,o,i){var a=i.likes,u=i._id,c=i.name,l=i.link,s=i.owner,f=i.myID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,ye),K(this,ve),K(this,de),Q(this,ne,{writable:!0,value:void 0}),Q(this,re,{writable:!0,value:void 0}),Q(this,oe,{writable:!0,value:void 0}),Q(this,ie,{writable:!0,value:void 0}),Q(this,ae,{writable:!0,value:void 0}),Q(this,ue,{writable:!0,value:void 0}),Q(this,ce,{writable:!0,value:void 0}),Q(this,le,{writable:!0,value:void 0}),Q(this,se,{writable:!0,value:void 0}),Q(this,fe,{writable:!0,value:void 0}),Q(this,pe,{writable:!0,value:void 0}),Q(this,he,{writable:!0,value:void 0}),ee(this,re,t),ee(this,oe,r),ee(this,ie,o),ee(this,ue,c),ee(this,ce,l),this.id=u,ee(this,ne,f),ee(this,le,s),ee(this,se,document.querySelector(n).content.querySelector(".element").cloneNode(!0)),ee(this,fe,Z(this,se).querySelector(".element__image")),ee(this,ae,Z(this,se).querySelector(".element__button-like")),ee(this,he,Z(this,se).querySelector(".element__button-trash")),ee(this,pe,a),this.likeCount=Z(this,se).querySelector(".element__like-count"),this.likeCount.textContent=a.length,this.isLiked=!1}var t,n;return t=e,(n=[{key:"setLike",value:function(e){this.likeCount.textContent=e,Y(this,ye,ge).call(this)}},{key:"removeCard",value:function(){Z(this,se).remove(),ee(this,se,null)}},{key:"haveMyLike",value:function(){var e=this;Z(this,pe).forEach((function(t){t._id==Z(e,ne)&&Y(e,ye,ge).call(e)}))}},{key:"create",value:function(){return Z(this,fe).src=Z(this,ce),Z(this,fe).alt=Z(this,ue),Z(this,se).querySelector(".element__name").textContent=Z(this,ue),Y(this,de,we).call(this),this.haveMyLike(),Z(this,se)}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function we(){var e=this;Z(this,fe).addEventListener("click",(function(){return Z(e,re).call(e,Z(e,ue),Z(e,ce))})),Z(this,ae).addEventListener("click",(function(){Z(e,ie).call(e,e.isLiked,e.id,e.setLike.bind(e))})),Z(this,le)._id==Z(this,ne)&&(Z(this,he).style.display="block",Z(this,he).addEventListener("click",(function(){return Y(e,ve,me).call(e)})))}function me(){Z(this,oe).call(this,this)}function ge(){this.isLiked=!this.isLiked,Z(this,ae).classList.toggle("element__button-like_active")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){Se(e,t),t.add(e)}function _e(e,t,n){Se(e,t),t.set(e,n)}function Se(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Oe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ce(e,t,"get"))}function je(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ce(e,t,"set"),n),n}function Ce(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Te=new WeakMap,We=new WeakMap,Le=new WeakMap,Me=new WeakMap,qe=new WeakSet,Ae=new WeakSet,Re=new WeakSet,Ie=new WeakSet,xe=new WeakSet,Ue=new WeakSet,De=new WeakSet,Be=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ee(this,De),Ee(this,Ue),Ee(this,xe),Ee(this,Ie),Ee(this,Re),Ee(this,Ae),Ee(this,qe),_e(this,Te,{writable:!0,value:void 0}),_e(this,We,{writable:!0,value:void 0}),_e(this,Le,{writable:!0,value:void 0}),_e(this,Me,{writable:!0,value:void 0}),je(this,Te,t),je(this,We,n),je(this,Le,Array.from(Oe(this,We).querySelectorAll(Oe(this,Te).inputSelector))),je(this,Me,Oe(this,We).querySelector(Oe(this,Te).submitButtonSelector))}var t,n;return t=e,(n=[{key:"resetFormErrors",value:function(){var e=this;Oe(this,Le).forEach((function(t){Pe(e,Re,Ne).call(e,t),Pe(e,Ae,Fe).call(e,t)})),Pe(this,Ie,Ve).call(this,Oe(this,Le))?Pe(this,xe,Je).call(this,Oe(this,Me)):Pe(this,Ue,He).call(this,Oe(this,Me))}},{key:"enableValidation",value:function(){Pe(this,De,$e).call(this)}}])&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ze(e,t){var n=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.add(Oe(this,Te).inputErrorClass),n.textContent=t,n.classList.add(Oe(this,Te).errorClass)}function Fe(e){var t=Oe(this,We).querySelector(".".concat(e.id,"-error"));e.classList.remove(Oe(this,Te).inputErrorClass),t.classList.remove(Oe(this,Te).errorClass),t.textContent=""}function Ne(e){e.validity.valid?Pe(this,Ae,Fe).call(this,e):Pe(this,qe,ze).call(this,e,e.validationMessage)}function Ve(e){return e.some((function(e){return!e.validity.valid}))}function Je(e){e.classList.add(Oe(this,Te).inactiveButtonClass),e.setAttribute("disabled",!0)}function He(e){e.classList.remove(Oe(this,Te).inactiveButtonClass),e.removeAttribute("disabled")}function $e(){var e=this;Oe(this,Le).forEach((function(t){return t.addEventListener("input",(function(){Pe(e,Re,Ne).call(e,t),Pe(e,Ie,Ve).call(e,Oe(e,Le))?Pe(e,xe,Je).call(e,Oe(e,Me)):Pe(e,Ue,He).call(e,Oe(e,Me))}))}))}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function Xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ye(e,t,"set"),n),n}function Ye(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=function(){function e(t){var n=t.nameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ke(this,Ze,{writable:!0,value:void 0}),Ke(this,et,{writable:!0,value:void 0}),Ke(this,tt,{writable:!0,value:void 0}),Xe(this,Ze,document.querySelector(n)),Xe(this,et,document.querySelector(r)),Xe(this,tt,document.querySelector(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Qe(this,Ze).textContent,description:Qe(this,et).textContent}}},{key:"setUserInfo",value:function(e,t){Qe(this,Ze).textContent=e,Qe(this,et).textContent=t}},{key:"setUserAvatar",value:function(e){Qe(this,tt).src=e}}])&&Ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function it(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ut(e,t,"get"))}function at(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ut(e,t,"set"),n),n}function ut(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ct=new WeakMap,lt=new WeakMap,st=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot(this,ct,{writable:!0,value:void 0}),ot(this,lt,{writable:!0,value:void 0}),at(this,ct,r),at(this,lt,n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return it(t,ct).call(t,e)}))}},{key:"addServerItem",value:function(e){it(this,lt).append(e)}},{key:"addItem",value:function(e){it(this,lt).prepend(e)}}])&&rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(){return ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=dt(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ht.apply(this,arguments)}function dt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wt(e)););return e}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function yt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function mt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function gt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Et(e,t,"get"))}function kt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Et(e,t,"set"),n),n}function Et(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _t=new WeakMap,St=new WeakMap,Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(r);if(o){var n=wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),mt(bt(t=i.call(this,e)),_t,{writable:!0,value:void 0}),mt(bt(t),St,{writable:!0,value:void 0}),t.addEventListeners(),kt(bt(t),_t,t.popup.querySelector(".form")),kt(bt(t),St,gt(bt(t),_t).querySelector(".form__confirm-button")),t}return t=a,(n=[{key:"setSubmitAction",value:function(e){var t=this;this.submitAction=function(n){n.preventDefault(),gt(t,St).setAttribute("disabled",!0),e().then((function(e){e&&t.closePopup(),gt(t,St).removeAttribute("disabled")}))}.bind(this),gt(this,_t).addEventListener("submit",this.submitAction)}},{key:"removeSubmitAction",value:function(){gt(this,_t).removeEventListener("submit",this.submitAction)}},{key:"closePopup",value:function(){ht(wt(a.prototype),"closePopup",this).call(this),this.removeSubmitAction()}}])&&pt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l),Ot={inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},jt=document.querySelector(".profile__edit-button"),Ct=document.querySelector(".profile__add-button"),Tt=document.querySelector(".profile__edit-avatar-button"),Wt=document.forms["add-form"],Lt=document.forms["edit-form"],Mt=document.forms["edit-avatar-form"],qt=document.querySelector(".elements"),At=document.querySelector("#name-input"),Rt=document.querySelector("#description-input");function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ut(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Bt(e,t,"get"))}function Dt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Bt(e,t,"set"),n),n}function Bt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var zt,Ft=new WeakMap,Nt=new WeakMap;function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xt(this,Ft,{writable:!0,value:void 0}),xt(this,Nt,{writable:!0,value:void 0}),Dt(this,Ft,t.url),Dt(this,Nt,t.headers)}var t,n;return t=e,(n=[{key:"response",value:function(e){return e().then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return console.log("Error while sending request",e),!1}))}},{key:"getInitialCards",value:function(){var e=this;return this.response((function(){return fetch("".concat(Ut(e,Ft),"/cards"),{headers:Ut(e,Nt)})}))}},{key:"getUserInformation",value:function(){var e=this;return this.response((function(){return fetch("".concat(Ut(e,Ft),"/users/me"),{headers:Ut(e,Nt)})}))}},{key:"updateUserInformation",value:function(e,t){var n=this;return this.response((function(){return fetch("".concat(Ut(n,Ft),"/users/me"),{method:"PATCH",headers:Ut(n,Nt),body:JSON.stringify({name:e,about:t})})}))}},{key:"createCard",value:function(e){var t=this,n=e.name,r=e.link;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards"),{method:"POST",headers:Ut(t,Nt),body:JSON.stringify({name:n,link:r})})}))}},{key:"deleteCard",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e),{method:"DELETE",headers:Ut(t,Nt)})}))}},{key:"setLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e,"/likes"),{method:"PUT",headers:Ut(t,Nt)})}))}},{key:"removeLike",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Ut(t,Nt)})}))}},{key:"updateAvatar",value:function(e){var t=this;return this.response((function(){return fetch("".concat(Ut(t,Ft),"/users/me/avatar"),{method:"PATCH",headers:Ut(t,Nt),body:JSON.stringify({avatar:e})})}))}}])&&It(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"ed068a2f-c117-42a5-a232-1e0db66110be","Content-Type":"application/json"}}),Ht=new nt({nameSelector:".profile__name",descriptionSelector:".profile__description",avatarSelector:".profile__photo"}),$t=new st({renderer:function(e){$t.addServerItem(Zt(e))}},qt);Promise.all([Jt.getUserInformation(),Jt.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];o&&(Ht.setUserInfo(o.name,o.about),Ht.setUserAvatar(o.avatar),zt=o._id),i&&$t.renderItems(i)})).catch((function(e){return console.error(e)}));var Gt=new Pt(".popup_type_confirm-delete"),Kt=function(e){Gt.openPopup(),Gt.setSubmitAction((function(){return Jt.deleteCard(e.id).then((function(t){if(t)return e.removeCard(),Promise.resolve(!0)})).catch((function(e){return console.log("Error while deleting card",e)}))}))},Qt=function(e,t,n){!function(e,t){e.then((function(e){e&&t(e.likes.length)})).catch((function(e){return console.log("Error while toggling like",e)}))}(e?Jt.removeLike(t):Jt.setLike(t),n)},Xt=new O,Yt=function(e,t){return Xt.openPopup(e,t)},Zt=function(e){return e.myID=zt,new be(Yt,"#element",Kt,Qt,e).create()},en=new H(".popup_type_add-card",(function(e){return en.loading(!0),Jt.createCard(e).then((function(e){if(e)return $t.addItem(Zt(e)),Promise.resolve(!0)})).catch((function(e){return console.log("Error while creating card",e)})).finally((function(){return en.loading(!1)}))}));Ct.addEventListener("click",(function(){rn.resetFormErrors(),en.openPopup()}));var tn=new H(".popup_type_edit-profile",(function(e){var t=e.name,n=e.description;return tn.loading(!0),Jt.updateUserInformation(t,n).then((function(e){if(e)return Ht.setUserInfo(t,n),Promise.resolve(!0)})).catch((function(e){return console.log("Error while updating user information",e)})).finally((function(){return tn.loading(!1)}))})),nn=new H(".popup_type_edit-avatar",(function(e){var t=e.link;return nn.loading(!0),Jt.updateAvatar(t).then((function(e){if(e)return Ht.setUserAvatar(t),Promise.resolve(!0)})).catch((function(e){return console.log("Error while updating avatar",e)})).finally((function(){return nn.loading(!1)}))}));Tt.addEventListener("click",(function(){nn.openPopup(),an.resetFormErrors()})),jt.addEventListener("click",(function(){var e=Ht.getUserInfo();At.value=e.name,Rt.value=e.description,tn.openPopup(),on.resetFormErrors()}));var rn=new Be(Ot,Wt),on=new Be(Ot,Lt),an=new Be(Ot,Mt);rn.enableValidation(),on.enableValidation(),an.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U1MsWUFBWXRILEVBQU0rRCxHQUNwQitCLFFBQVFtQyxTQUFRLEVBRXpCLElBQ0MvQixPQUFNLFNBQUFDLEdBQUssT0FBSUMsUUFBUUMsSUFBSSx3Q0FBeUNGLEVBQU0sSUFDMUV5QyxTQUFRLGtCQUFNRyxHQUFxQk4sU0FBUSxFQUFNLEdBQ3BELElBRU1RLEdBQXNCLElBQUk1SSxFQUFjLDJCQUEyQixZQUFjLElBQVhKLEVBQUksRUFBSkEsS0FFM0UsT0FEQWdKLEdBQW9CUixTQUFRLEdBQ3JCbEQsR0FBSTJELGFBQWFqSixHQUN0QlUsTUFBSyxTQUFDb0gsR0FDTixHQUFJQSxFQUVILE9BREFsQixHQUFTVSxjQUFjdEgsR0FDaEI2RixRQUFRbUMsU0FBUSxFQUV6QixJQUNDL0IsT0FBTSxTQUFBQyxHQUFLLE9BQUlDLFFBQVFDLElBQUksOEJBQStCRixFQUFNLElBQ2hFeUMsU0FBUSxrQkFBTUssR0FBb0JSLFNBQVEsRUFBTSxHQUNuRCxJQUVBM0QsR0FBaUIzRixpQkFBaUIsU0FBUyxXQUMxQzhKLEdBQW9CckIsWUFDcEJ1QixHQUE0QkwsaUJBQzdCLElBRUFsRSxHQUFrQnpGLGlCQUFpQixTQUFTLFdBQU0sTUFDK0IwSCxHQUFTdUMsY0FBaEZoRSxHQUFpQmhFLE1BQUssRUFBNUJwQixLQUEyQ3FGLEdBQXdCakUsTUFBSyxFQUExQzJDLFlBQ2pDZ0YsR0FBcUJuQixZQUNyQnlCLEdBQXNCUCxpQkFDdkIsSUFFQSxJQUFNRCxHQUF1QixJQUFJbEcsR0FBY2dDLEdBQWVJLElBQ3hEc0UsR0FBd0IsSUFBSTFHLEdBQWNnQyxHQUFlTSxJQUN6RGtFLEdBQThCLElBQUl4RyxHQUFjZ0MsR0FBZU8sSUFDckUyRCxHQUFxQlMsbUJBQ3JCRCxHQUFzQkMsbUJBQ3RCSCxHQUE0Qkcsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1EZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvZGF0YS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQb3B1cCB7XHJcblxyXG5cdHBvcHVwO1xyXG5cdGhhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYztcclxuXHQjYnV0dG9uQ2xvc2U7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLnBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcblx0XHR0aGlzLiNidXR0b25DbG9zZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuXHRcdHRoaXMuaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjID0gdGhpcy4jaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjLmJpbmQodGhpcyk7XHJcblx0fVxyXG5cclxuXHRhZGRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuI2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZVBvcHVwKCkpO1xyXG5cdFx0dGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLiNoYW5kbGVDbG9zZVBvcHVwQ2xpY2tPdmVybGF5KGUpKTtcclxuXHR9XHJcblxyXG5cdCNoYW5kbGVDbG9zZVBvcHVwQ2xpY2tPdmVybGF5KGV2ZW50KSB7XHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQjaGFuZGxlQ2xvc2VQb3B1cFByZXNzRXNjKGV2ZW50KSB7XHJcblx0XHRpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHR0aGlzLmNsb3NlUG9wdXAoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9wZW5Qb3B1cCgpIHtcclxuXHRcdHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVDbG9zZVBvcHVwUHJlc3NFc2MpO1xyXG5cdH1cclxuXHJcblx0Y2xvc2VQb3B1cCgpIHtcclxuXHRcdHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVDbG9zZVBvcHVwUHJlc3NFc2MpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXAgfTsiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcblxyXG5cdCNpbWFnZTtcclxuXHQjbmFtZTtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcignLnBvcHVwX3R5cGVfcHJldmlldy1waWN0dXJlJyk7XHJcblx0XHR0aGlzLiNpbWFnZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG5cdFx0dGhpcy4jbmFtZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19uYW1lJyk7XHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRvcGVuUG9wdXAobmFtZSwgbGluaykge1xyXG5cdFx0dGhpcy4jbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcblx0XHR0aGlzLiNpbWFnZS5zcmMgPSBsaW5rO1xyXG5cdFx0dGhpcy4jaW1hZ2UuYWx0ID0gbmFtZTtcclxuXHRcdHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfTsiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG5cclxuXHQjaGFuZGxlU3VibWl0O1xyXG5cdCNmb3JtO1xyXG5cdCNmb3JtSW5wdXRzO1xyXG5cdCNzdWJtaXRidXR0b247XHJcblx0I3N1Ym1pdEJ1dHRvblRleHQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuXHRcdHN1cGVyKHNlbGVjdG9yKTtcclxuXHRcdHRoaXMuI2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuXHRcdHRoaXMuI2Zvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcblx0XHR0aGlzLiNmb3JtSW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpKTtcclxuXHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbiA9IHRoaXMuI2Zvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKTtcclxuXHRcdHRoaXMuI3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLiNzdWJtaXRidXR0b24udGV4dENvbnRlbnQ7XHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHQjZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblx0XHRjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cdFx0dGhpcy4jZm9ybUlucHV0cy5mb3JFYWNoKGlucHV0ID0+IGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xyXG5cdFx0cmV0dXJuIGlucHV0VmFsdWVzO1xyXG5cdH1cclxuXHJcblx0YWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHRzdXBlci5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdFx0dGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuI2hhbmRsZVN1Ym1pdCh0aGlzLiNnZXRJbnB1dFZhbHVlcygpKVxyXG5cdFx0XHRcdC50aGVuKG9rID0+IHtcclxuXHRcdFx0XHRcdGlmIChvaykge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlUG9wdXAoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Y2xvc2VQb3B1cCgpIHtcclxuXHRcdHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuXHRcdHRoaXMuI2Zvcm0ucmVzZXQoKTtcclxuXHR9XHJcblxyXG5cdGxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcblx0XHRpZiAoaXNMb2FkaW5nKSB7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcblx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24udGV4dENvbnRlbnQgPSB0aGlzLiNzdWJtaXRCdXR0b25UZXh0O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBXaXRoRm9ybSB9OyIsImNsYXNzIENhcmQge1xyXG5cclxuXHQjbXlJRDtcclxuXHJcblx0I29wZW5DYXJkUHJldmlldztcclxuXHQjaGFuZGxlRGVsZXRlO1xyXG5cdCNoYW5kbGVMaWtlO1xyXG5cdCNidXR0b25MaWtlO1xyXG5cdCNuYW1lO1xyXG5cdCNsaW5rO1xyXG5cdCNvd25lcjtcclxuXHQjZWxlbWVudDtcclxuXHQjZWxlbWVudEltYWdlO1xyXG5cdCNsaWtlcztcclxuXHQjYnV0dG9uRGVsZXRlO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Iob3BlbkNhcmRQcmV2aWV3LCB0ZW1wbGF0ZSwgaGFuZGxlRGVsZXRlLCBoYW5kbGVMaWtlLCB7IGxpa2VzLCBfaWQsIG5hbWUsIGxpbmssIG93bmVyLCBteUlEIH0pIHtcclxuXHRcdHRoaXMuI29wZW5DYXJkUHJldmlldyA9IG9wZW5DYXJkUHJldmlldztcclxuXHRcdHRoaXMuI2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZTtcclxuXHRcdHRoaXMuI2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG5cdFx0dGhpcy4jbmFtZSA9IG5hbWU7XHJcblx0XHR0aGlzLiNsaW5rID0gbGluaztcclxuXHRcdHRoaXMuaWQgPSBfaWQ7XHJcblx0XHR0aGlzLiNteUlEID0gbXlJRDtcclxuXHRcdHRoaXMuI293bmVyID0gb3duZXI7XHJcblx0XHR0aGlzLiNlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuY29udGVudFxyXG5cdFx0XHQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblx0XHR0aGlzLiNlbGVtZW50SW1hZ2UgPSB0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xyXG5cdFx0dGhpcy4jYnV0dG9uTGlrZSA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbi1saWtlJyk7XHJcblx0XHR0aGlzLiNidXR0b25EZWxldGUgPSB0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tdHJhc2gnKTtcclxuXHRcdHRoaXMuI2xpa2VzID0gbGlrZXM7XHJcblx0XHR0aGlzLmxpa2VDb3VudCA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnQnKTtcclxuXHRcdHRoaXMubGlrZUNvdW50LnRleHRDb250ZW50ID0gbGlrZXMubGVuZ3RoO1xyXG5cdFx0dGhpcy5pc0xpa2VkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQjYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLiNlbGVtZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLiNvcGVuQ2FyZFByZXZpZXcodGhpcy4jbmFtZSwgdGhpcy4jbGluaykpO1xyXG5cdFx0dGhpcy4jYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dGhpcy4jaGFuZGxlTGlrZSh0aGlzLmlzTGlrZWQsIHRoaXMuaWQsIHRoaXMuc2V0TGlrZS5iaW5kKHRoaXMpKTtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKHRoaXMuI293bmVyLl9pZCA9PSB0aGlzLiNteUlEKSB7XHJcblx0XHRcdHRoaXMuI2J1dHRvbkRlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHRcdFx0dGhpcy4jYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy4jaGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldExpa2UoY291bnQpIHtcclxuXHRcdHRoaXMubGlrZUNvdW50LnRleHRDb250ZW50ID0gY291bnQ7XHJcblx0XHR0aGlzLiN0b2dnbGVMaWtlKCk7XHJcblx0fVxyXG5cclxuXHQjaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuXHRcdHRoaXMuI2hhbmRsZURlbGV0ZSh0aGlzKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUNhcmQoKSB7XHJcblx0XHR0aGlzLiNlbGVtZW50LnJlbW92ZSgpO1xyXG5cdFx0dGhpcy4jZWxlbWVudCA9IG51bGw7XHJcblx0fVxyXG5cclxuXHQjdG9nZ2xlTGlrZSgpIHtcclxuXHRcdHRoaXMuaXNMaWtlZCA9ICF0aGlzLmlzTGlrZWQ7XHJcblx0XHR0aGlzLiNidXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2J1dHRvbi1saWtlX2FjdGl2ZScpO1xyXG5cdH1cclxuXHJcblx0aGF2ZU15TGlrZSgpIHtcclxuXHRcdHRoaXMuI2xpa2VzLmZvckVhY2gobGlrZSA9PiB7XHJcblx0XHRcdGlmIChsaWtlLl9pZCA9PSB0aGlzLiNteUlEKSB7XHJcblx0XHRcdFx0dGhpcy4jdG9nZ2xlTGlrZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGNyZWF0ZSgpIHtcclxuXHRcdHRoaXMuI2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLiNsaW5rO1xyXG5cdFx0dGhpcy4jZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuI25hbWU7XHJcblx0XHR0aGlzLiNlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLiNuYW1lO1xyXG5cdFx0dGhpcy4jYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuaGF2ZU15TGlrZSgpO1xyXG5cdFx0cmV0dXJuIHRoaXMuI2VsZW1lbnQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBDYXJkIH07IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcblxyXG5cdCNzZXR0aW5ncztcclxuXHQjZm9ybTtcclxuXHQjaW5wdXRMaXN0O1xyXG5cdCNidXR0b25TdWJtaXQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuI3NldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLiNmb3JtID0gZm9ybVNlbGVjdG9yO1xyXG5cdFx0dGhpcy4jaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy4jc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG5cdFx0dGhpcy4jYnV0dG9uU3VibWl0ID0gdGhpcy4jZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuI3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHR9XHJcblxyXG5cdCNzaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JNZXNzYWdlKSB7XHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG5cdFx0aW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLiNzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcblx0fVxyXG5cclxuXHQjaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuXHRcdGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcblx0XHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcblx0XHRlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG5cdH1cclxuXHJcblx0I2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG5cdFx0aWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG5cdFx0XHR0aGlzLiNzaG93SW5wdXRFcnJvcihpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0I2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuXHRcdHJldHVybiBpbnB1dExpc3Quc29tZShpbnB1dCA9PiB7XHJcblx0XHRcdHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdCNlbmFibGVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0KSB7XHJcblx0XHRidXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLiNzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHRcdGJ1dHRvblN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHQjZGlzYWJsZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQpIHtcclxuXHRcdGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cdFx0YnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuXHR9XHJcblxyXG5cdCNzZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLiNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG5cdFx0XHRpZiAodGhpcy4jaGFzSW52YWxpZElucHV0KHRoaXMuI2lucHV0TGlzdCkpIHtcclxuXHRcdFx0XHR0aGlzLiNlbmFibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLiNkaXNhYmxlU3VibWl0QnV0dG9uKHRoaXMuI2J1dHRvblN1Ym1pdCk7XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdHJlc2V0Rm9ybUVycm9ycygpIHtcclxuXHRcdHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG5cdFx0XHR0aGlzLiNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG5cdFx0XHR0aGlzLiNoaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLiNoYXNJbnZhbGlkSW5wdXQodGhpcy4jaW5wdXRMaXN0KSkge1xyXG5cdFx0XHR0aGlzLiNlbmFibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuI2Rpc2FibGVTdWJtaXRCdXR0b24odGhpcy4jYnV0dG9uU3VibWl0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcblx0XHR0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9OyIsImNsYXNzIFVzZXJJbmZvIHtcclxuXHJcblx0I3VzZXJOYW1lO1xyXG5cdCN1c2VyRGVzY3JpcHRpb247XHJcblx0I3VzZXJBdmF0YXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcblx0XHR0aGlzLiN1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuXHRcdHRoaXMuI3VzZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcblx0XHR0aGlzLiN1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHRnZXRVc2VySW5mbygpIHtcclxuXHRcdHJldHVybiB7IG5hbWU6IHRoaXMuI3VzZXJOYW1lLnRleHRDb250ZW50LCBkZXNjcmlwdGlvbjogdGhpcy4jdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50IH07XHJcblx0fVxyXG5cclxuXHRzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG5cdFx0dGhpcy4jdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cdFx0dGhpcy4jdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcblx0fVxyXG5cclxuXHRzZXRVc2VyQXZhdGFyKGxpbmspIHtcclxuXHRcdHRoaXMuI3VzZXJBdmF0YXIuc3JjID0gbGluaztcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFVzZXJJbmZvIH07IiwiY2xhc3MgU2VjdGlvbiB7XHJcblxyXG5cdCNyZW5kZXJlcjtcclxuXHQjY29udGFpbmVyO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLiNyZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cdFx0dGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJJdGVtcyhpdGVtcykge1xyXG5cdFx0aXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuI3JlbmRlcmVyKGl0ZW0pKTtcclxuXHR9XHJcblxyXG5cdGFkZFNlcnZlckl0ZW0oaXRlbSkge1xyXG5cdFx0dGhpcy4jY29udGFpbmVyLmFwcGVuZChpdGVtKTtcclxuXHR9XHJcblxyXG5cdGFkZEl0ZW0oaXRlbSkge1xyXG5cdFx0dGhpcy4jY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTZWN0aW9uIH07IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBDb25maXJtRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG5cclxuXHQjZm9ybTtcclxuXHQjc3VibWl0YnV0dG9uO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZWxlY3RvciwpIHtcclxuXHRcdHN1cGVyKHNlbGVjdG9yKTtcclxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuI2Zvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcblx0XHR0aGlzLiNzdWJtaXRidXR0b24gPSB0aGlzLiNmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19jb25maXJtLWJ1dHRvbicpO1xyXG5cdH1cclxuXHJcblx0c2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG5cdFx0Y29uc3Qgc3VibWl0QWN0aW9uID0gKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLiNzdWJtaXRidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHRhY3Rpb24oKS50aGVuKChvaykgPT4ge1xyXG5cdFx0XHRcdGlmIChvaykge1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuI3N1Ym1pdGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH1cclxuXHRcdHRoaXMuc3VibWl0QWN0aW9uID0gc3VibWl0QWN0aW9uLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLiNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0QWN0aW9uKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZVN1Ym1pdEFjdGlvbigpIHtcclxuXHRcdHRoaXMuI2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRBY3Rpb24pO1xyXG5cclxuXHR9XHJcblxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblx0XHRzdXBlci5jbG9zZVBvcHVwKCk7XHJcblx0XHR0aGlzLnJlbW92ZVN1Ym1pdEFjdGlvbigpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBDb25maXJtRGVsZXRlIH07IiwiY29uc3QgdmFsaWRhdGlvblNldCA9IHtcclxuXHRpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuXHRzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQtYnV0dG9uJyxcclxuXHRpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXHJcblx0aW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXHJcblx0ZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yX3Zpc2libGUnXHJcbn1cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ1dHRvbicpO1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSAnI2VsZW1lbnQnO1xyXG5jb25zdCBmb3JtVHlwZUFkZCA9IGRvY3VtZW50LmZvcm1zWydhZGQtZm9ybSddO1xyXG5jb25zdCBmb3JtVHlwZUVkaXQgPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1mb3JtJ107XHJcbmNvbnN0IGZvcm1UeXBlRWRpdEF2YXRhciA9IGRvY3VtZW50LmZvcm1zWydlZGl0LWF2YXRhci1mb3JtJ107XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZS1pbnB1dCcpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbi1pbnB1dCcpO1xyXG5cclxuY29uc3QgQVBJX0NPTkZJRyA9IHtcclxuXHR1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTUyJyxcclxuXHJcblx0aGVhZGVyczoge1xyXG5cdFx0YXV0aG9yaXphdGlvbjogJ2VkMDY4YTJmLWMxMTctNDJhNS1hMjMyLTFlMGRiNjYxMTBiZScsXHJcblx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdH0sXHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcblx0dmFsaWRhdGlvblNldCwgcHJvZmlsZUVkaXRCdXR0b24sIHByb2ZpbGVBZGRCdXR0b24sIGNhcmRUZW1wbGF0ZSxcclxuXHRmb3JtVHlwZUFkZCwgZm9ybVR5cGVFZGl0LCBjYXJkc0NvbnRhaW5lciwgcHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcblx0YXZhdGFyRWRpdEJ1dHRvbiwgZm9ybVR5cGVFZGl0QXZhdGFyLCBBUElfQ09ORklHXHJcbn07IiwiaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7IFBvcHVwQ29uZmlybURlbGV0ZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRGVsZXRlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcblx0dmFsaWRhdGlvblNldCwgcHJvZmlsZUFkZEJ1dHRvbiwgcHJvZmlsZUVkaXRCdXR0b24sXHJcblx0Y2FyZFRlbXBsYXRlLCBmb3JtVHlwZUFkZCwgZm9ybVR5cGVFZGl0LCBjYXJkc0NvbnRhaW5lcixcclxuXHRwcm9maWxlRGVzY3JpcHRpb25JbnB1dCwgcHJvZmlsZU5hbWVJbnB1dCxcclxuXHRhdmF0YXJFZGl0QnV0dG9uLCBmb3JtVHlwZUVkaXRBdmF0YXIsIEFQSV9DT05GSUdcclxufVxyXG5cdGZyb20gJy4uL3V0aWxzL2RhdGEuanMnO1xyXG5cclxuLy/RgdGC0LjQu9C4IGJ5IHdlYnBhY2tcclxuaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxubGV0IE1ZX0lEO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShBUElfQ09ORklHKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLCBkZXNjcmlwdGlvblNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJywgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fcGhvdG8nIH0pO1xyXG5cclxuY29uc3QgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG5cdHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG5cdFx0Y2FyZHNTZWN0aW9uLmFkZFNlcnZlckl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XHJcblx0fVxyXG59LCBjYXJkc0NvbnRhaW5lcik7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG5cdC50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XHJcblx0XHRpZiAodXNlcikge1xyXG5cdFx0XHR1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyLm5hbWUsIHVzZXIuYWJvdXQpO1xyXG5cdFx0XHR1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXIuYXZhdGFyKTtcclxuXHRcdFx0TVlfSUQgPSB1c2VyLl9pZDtcclxuXHRcdH1cclxuXHRcdGlmIChjYXJkcykge1xyXG5cdFx0XHRjYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTtcclxuXHJcbmNvbnN0IHBvcHVwVHlwZUNvbmZpcm0gPSBuZXcgUG9wdXBDb25maXJtRGVsZXRlKCcucG9wdXBfdHlwZV9jb25maXJtLWRlbGV0ZScpO1xyXG5jb25zdCBoYW5kbGVEZWxldGVDYXJkID0gKGNhcmQpID0+IHtcclxuXHRwb3B1cFR5cGVDb25maXJtLm9wZW5Qb3B1cCgpO1xyXG5cdHBvcHVwVHlwZUNvbmZpcm0uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuXHRcdHJldHVybiBhcGkuZGVsZXRlQ2FyZChjYXJkLmlkKVxyXG5cdFx0XHQudGhlbigocmVxdWVzdFN0YXR1cykgPT4ge1xyXG5cdFx0XHRcdGlmIChyZXF1ZXN0U3RhdHVzKSB7XHJcblx0XHRcdFx0XHRjYXJkLnJlbW92ZUNhcmQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIGRlbGV0aW5nIGNhcmQnLCBlcnJvcikpXHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VMaWtlID0gKGZldGNoLCBzZXRMaWtlKSA9PiB7XHJcblx0ZmV0Y2gudGhlbihkYXRhID0+IHtcclxuXHRcdGlmIChkYXRhKSB7XHJcblx0XHRcdHNldExpa2UoZGF0YS5saWtlcy5sZW5ndGgpXHJcblx0XHR9XHJcblx0fSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgdG9nZ2xpbmcgbGlrZScsIGVycm9yKSk7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUxpa2VDYXJkID0gKGxpa2VkLCBpZCwgc2V0TGlrZSkgPT4ge1xyXG5cdGlmIChsaWtlZCkge1xyXG5cdFx0Y2hhbmdlTGlrZShhcGkucmVtb3ZlTGlrZShpZCksIHNldExpa2UpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjaGFuZ2VMaWtlKGFwaS5zZXRMaWtlKGlkKSwgc2V0TGlrZSk7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBwb3B1cFR5cGVQcmV2aWV3UGljdHVyZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgpO1xyXG5cclxuY29uc3Qgb3BlbkNhcmRQcmV2aWV3ID0gKG5hbWUsIGxpbmspID0+IHBvcHVwVHlwZVByZXZpZXdQaWN0dXJlLm9wZW5Qb3B1cChuYW1lLCBsaW5rKTtcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcblx0ZGF0YS5teUlEID0gTVlfSUQ7XHJcblx0cmV0dXJuIG5ldyBDYXJkKG9wZW5DYXJkUHJldmlldywgY2FyZFRlbXBsYXRlLCBoYW5kbGVEZWxldGVDYXJkLCBoYW5kbGVMaWtlQ2FyZCwgZGF0YSlcclxuXHRcdC5jcmVhdGUoKTtcclxufTtcclxuXHJcbmNvbnN0IHBvcHVwVHlwZUFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkLWNhcmQnLCAoZGF0YSkgPT4ge1xyXG5cdHBvcHVwVHlwZUFkZENhcmQubG9hZGluZyh0cnVlKTtcclxuXHRyZXR1cm4gYXBpLmNyZWF0ZUNhcmQoZGF0YSlcclxuXHRcdC50aGVuKChuZXdEYXRhKSA9PiB7XHJcblx0XHRcdGlmIChuZXdEYXRhKSB7XHJcblx0XHRcdFx0Y2FyZHNTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuZXdEYXRhKSk7XHJcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgY3JlYXRpbmcgY2FyZCcsIGVycm9yKSlcclxuXHRcdC5maW5hbGx5KCgpID0+IHBvcHVwVHlwZUFkZENhcmQubG9hZGluZyhmYWxzZSkpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0dmFsaWRhdG9yRm9ybVR5cGVBZGQucmVzZXRGb3JtRXJyb3JzKCk7XHJcblx0cG9wdXBUeXBlQWRkQ2FyZC5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFR5cGVFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnLCAoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSA9PiB7XHJcblx0cG9wdXBUeXBlRWRpdFByb2ZpbGUubG9hZGluZyh0cnVlKTtcclxuXHRyZXR1cm4gYXBpLnVwZGF0ZVVzZXJJbmZvcm1hdGlvbihuYW1lLCBkZXNjcmlwdGlvbilcclxuXHRcdC50aGVuKChyZXF1ZXN0U3RhdHVzKSA9PiB7XHJcblx0XHRcdGlmIChyZXF1ZXN0U3RhdHVzKSB7XHJcblx0XHRcdFx0dXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pO1xyXG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHVwZGF0aW5nIHVzZXIgaW5mb3JtYXRpb24nLCBlcnJvcikpXHJcblx0XHQuZmluYWxseSgoKSA9PiBwb3B1cFR5cGVFZGl0UHJvZmlsZS5sb2FkaW5nKGZhbHNlKSk7XHJcbn0pXHJcblxyXG5jb25zdCBwb3B1cFR5cGVFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQtYXZhdGFyJywgKHsgbGluayB9KSA9PiB7XHJcblx0cG9wdXBUeXBlRWRpdEF2YXRhci5sb2FkaW5nKHRydWUpO1xyXG5cdHJldHVybiBhcGkudXBkYXRlQXZhdGFyKGxpbmspXHJcblx0XHQudGhlbigocmVxdWVzdFN0YXR1cykgPT4ge1xyXG5cdFx0XHRpZiAocmVxdWVzdFN0YXR1cykge1xyXG5cdFx0XHRcdHVzZXJJbmZvLnNldFVzZXJBdmF0YXIobGluayk7XHJcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgdXBkYXRpbmcgYXZhdGFyJywgZXJyb3IpKVxyXG5cdFx0LmZpbmFsbHkoKCkgPT4gcG9wdXBUeXBlRWRpdEF2YXRhci5sb2FkaW5nKGZhbHNlKSk7XHJcbn0pXHJcblxyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdHBvcHVwVHlwZUVkaXRBdmF0YXIub3BlblBvcHVwKCk7XHJcblx0dmFsaWRhdG9yRm9ybVR5cGVFZGl0QXZhdGFyLnJlc2V0Rm9ybUVycm9ycygpO1xyXG59KVxyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0KHsgbmFtZTogcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSwgZGVzY3JpcHRpb246IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuXHRwb3B1cFR5cGVFZGl0UHJvZmlsZS5vcGVuUG9wdXAoKTtcclxuXHR2YWxpZGF0b3JGb3JtVHlwZUVkaXQucmVzZXRGb3JtRXJyb3JzKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgdmFsaWRhdG9yRm9ybVR5cGVBZGQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0LCBmb3JtVHlwZUFkZCk7XHJcbmNvbnN0IHZhbGlkYXRvckZvcm1UeXBlRWRpdCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXQsIGZvcm1UeXBlRWRpdCk7XHJcbmNvbnN0IHZhbGlkYXRvckZvcm1UeXBlRWRpdEF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXQsIGZvcm1UeXBlRWRpdEF2YXRhcik7XHJcbnZhbGlkYXRvckZvcm1UeXBlQWRkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRhdG9yRm9ybVR5cGVFZGl0LmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRhdG9yRm9ybVR5cGVFZGl0QXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG4iLCJjbGFzcyBBcGkge1xyXG5cclxuXHQjdXJsO1xyXG5cdCNoZWFkZXJzO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihkYXRhKSB7XHJcblx0XHR0aGlzLiN1cmwgPSBkYXRhLnVybDtcclxuXHRcdHRoaXMuI2hlYWRlcnMgPSBkYXRhLmhlYWRlcnM7XHJcblx0fVxyXG5cclxuXHRyZXNwb25zZShmZXRjaCkge1xyXG5cdFx0cmV0dXJuIGZldGNoKCkudGhlbihyZXNwb25zZSA9PiB7XHJcblx0XHRcdGlmIChyZXNwb25zZS5vaykge1xyXG5cdFx0XHRcdHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXMpKTtcclxuXHRcdH0pXHJcblx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHNlbmRpbmcgcmVxdWVzdCcsIGVycm9yKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z2V0SW5pdGlhbENhcmRzKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy4jaGVhZGVycyB9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z2V0VXNlckluZm9ybWF0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy4jaGVhZGVycyB9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlVXNlckluZm9ybWF0aW9uKG5hbWUsIGFib3V0KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L3VzZXJzL21lYCwge1xyXG5cdFx0XHRcdG1ldGhvZDogJ1BBVENIJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxyXG5cdFx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0XHRcdG5hbWU6IG5hbWUsXHJcblx0XHRcdFx0XHRhYm91dDogYWJvdXRcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzYCwge1xyXG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFx0bmFtZTogbmFtZSxcclxuXHRcdFx0XHRcdGxpbms6IGxpbmtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRkZWxldGVDYXJkKGlkKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZSgoKSA9PiB7XHJcblx0XHRcdHJldHVybiBmZXRjaChgJHt0aGlzLiN1cmx9L2NhcmRzLyR7aWR9YCwge1xyXG5cdFx0XHRcdG1ldGhvZDogJ0RFTEVURScsXHJcblx0XHRcdFx0aGVhZGVyczogdGhpcy4jaGVhZGVycyxcclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2V0TGlrZShpZCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUxpa2UoaWQpIHtcclxuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlKCgpID0+IHtcclxuXHRcdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuI3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVBdmF0YXIobGluaykge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2UoKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy4jdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcblx0XHRcdFx0bWV0aG9kOiAnUEFUQ0gnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXHJcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFx0YXZhdGFyOiBsaW5rLFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBBcGkgfTsiXSwibmFtZXMiOlsiUG9wdXAiLCJzZWxlY3RvciIsInRoaXMiLCJwb3B1cCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZUNsb3NlUG9wdXBQcmVzc0VzYyIsImJpbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cCIsImUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsIlBvcHVwV2l0aEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJuYW1lIiwibGluayIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcmV2ZW50RGVmYXVsdCIsInRoZW4iLCJvayIsInJlc2V0IiwiaXNMb2FkaW5nIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsIkNhcmQiLCJvcGVuQ2FyZFByZXZpZXciLCJ0ZW1wbGF0ZSIsImhhbmRsZURlbGV0ZSIsImhhbmRsZUxpa2UiLCJsaWtlcyIsIl9pZCIsIm93bmVyIiwibXlJRCIsImlkIiwiY29udGVudCIsImNsb25lTm9kZSIsImxpa2VDb3VudCIsImxlbmd0aCIsImlzTGlrZWQiLCJjb3VudCIsImxpa2UiLCJoYXZlTXlMaWtlIiwic2V0TGlrZSIsInN0eWxlIiwiZGlzcGxheSIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uU3VibWl0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiZGVzY3JpcHRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIml0ZW1zIiwiaXRlbSIsImFwcGVuZCIsInByZXBlbmQiLCJQb3B1cENvbmZpcm1EZWxldGUiLCJhY3Rpb24iLCJzdWJtaXRBY3Rpb24iLCJyZW1vdmVTdWJtaXRBY3Rpb24iLCJ2YWxpZGF0aW9uU2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImZvcm1UeXBlQWRkIiwiZm9ybXMiLCJmb3JtVHlwZUVkaXQiLCJmb3JtVHlwZUVkaXRBdmF0YXIiLCJjYXJkc0NvbnRhaW5lciIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsIk1ZX0lEIiwiYXBpIiwiZGF0YSIsInVybCIsImhlYWRlcnMiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsImNhcmRzU2VjdGlvbiIsImFkZFNlcnZlckl0ZW0iLCJjcmVhdGVDYXJkIiwiYWxsIiwiZ2V0VXNlckluZm9ybWF0aW9uIiwiZ2V0SW5pdGlhbENhcmRzIiwidXNlciIsImNhcmRzIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwicmVuZGVySXRlbXMiLCJwb3B1cFR5cGVDb25maXJtIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmQiLCJvcGVuUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicmVxdWVzdFN0YXR1cyIsInJlbW92ZUNhcmQiLCJyZXNvbHZlIiwiaGFuZGxlTGlrZUNhcmQiLCJsaWtlZCIsImNoYW5nZUxpa2UiLCJyZW1vdmVMaWtlIiwicG9wdXBUeXBlUHJldmlld1BpY3R1cmUiLCJjcmVhdGUiLCJwb3B1cFR5cGVBZGRDYXJkIiwibG9hZGluZyIsIm5ld0RhdGEiLCJhZGRJdGVtIiwiZmluYWxseSIsInZhbGlkYXRvckZvcm1UeXBlQWRkIiwicmVzZXRGb3JtRXJyb3JzIiwicG9wdXBUeXBlRWRpdFByb2ZpbGUiLCJ1cGRhdGVVc2VySW5mb3JtYXRpb24iLCJwb3B1cFR5cGVFZGl0QXZhdGFyIiwidXBkYXRlQXZhdGFyIiwidmFsaWRhdG9yRm9ybVR5cGVFZGl0QXZhdGFyIiwiZ2V0VXNlckluZm8iLCJ2YWxpZGF0b3JGb3JtVHlwZUVkaXQiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==